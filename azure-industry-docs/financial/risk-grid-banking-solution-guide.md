---
title: 概觀 - Azure Batch 和 Azure Data Lake 的網格運算風險分析
author: dstarr
ms.author: dastarr
ms.date: 11/20/2019
ms.topic: article
ms.service: industry
description: 介紹銀行業實作 Azure Batch 來進行風險網格運算的技術層面。
ms.openlocfilehash: 542fb820870048ac2ec2cb67c2bbf13988588ea1
ms.sourcegitcommit: f030566b177715794d2ad857b150317e72d04d64
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/20/2019
ms.locfileid: "74234667"
---
# <a name="risk-grid-computing-in-banking-solution-guide"></a><span data-ttu-id="67b3e-103">銀行業風險網格運算解決方案指南</span><span class="sxs-lookup"><span data-stu-id="67b3e-103">Risk Grid Computing in Banking Solution Guide</span></span>

<span data-ttu-id="67b3e-104">本文會提供技術方面的概觀，解說如何使用 Microsoft Azure 來支援及強化銀行業的風險網格運算，包括建議的系統和高階架構。</span><span class="sxs-lookup"><span data-stu-id="67b3e-104">This article provides a technical overview of using Microsoft Azure to support and enhance risk grid computing in banking, including recommended systems and high-level architectures.</span></span>

<span data-ttu-id="67b3e-105">本文件的目標讀者為解決方案架構師，在某些情況下，也適合想要深入探討風險運算解決方案提案的技術決策者閱讀。</span><span class="sxs-lookup"><span data-stu-id="67b3e-105">This document is intended for Solution Architects, and in some cases Technical Decision Makers, who want a deep dive on proposed solutions for risk computing.</span></span>

## <a name="introduction"></a><span data-ttu-id="67b3e-106">簡介</span><span class="sxs-lookup"><span data-stu-id="67b3e-106">Introduction</span></span>

<span data-ttu-id="67b3e-107">財務風險分析模型通常會以批次工作形式處理，繁重的運算負載會對計算能力、資料存取及分析產生高度需求。</span><span class="sxs-lookup"><span data-stu-id="67b3e-107">Financial risk analysis models are typically processed as batch jobs, with heavy compute loads generating high demand for computing power, data access, and analysis.</span></span> <span data-ttu-id="67b3e-108">風險網格運算的計算需求通常會隨著時間增加，對於計算資源的需求也會相應增加。</span><span class="sxs-lookup"><span data-stu-id="67b3e-108">Demand for risk grid computing calculations often grows over time, and correspondingly the need for compute resources increases.</span></span>

<span data-ttu-id="67b3e-109">Azure 提供了多樣化的產品與服務，即表示大部分的問題都不只有一種解決方案。</span><span class="sxs-lookup"><span data-stu-id="67b3e-109">The broad range of available products and services in Azure means there can be more than one solution to most problems.</span></span> <span data-ttu-id="67b3e-110">本文會概略介紹銀行業如何使用量身設計的技術、模式和實務做法，讓使用 [Microsoft Azure Batch](/azure/batch/batch-dotnet-get-started?WT.mc_id=gridbanksg-docs-dastarr) 的風險網格運算解決方案發揮最大效益。</span><span class="sxs-lookup"><span data-stu-id="67b3e-110">This article provides an overview of the technologies, patterns and practices gauged to be most effective for a risk grid computing solution in banking using [Microsoft Azure Batch](/azure/batch/batch-dotnet-get-started?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

<span data-ttu-id="67b3e-111">Azure Batch 這項免費服務提供了符合成本效益且安全的解決方案，適用於風險網格運算模型常搭配使用的基礎結構和不同階段的批次處理。</span><span class="sxs-lookup"><span data-stu-id="67b3e-111">Azure Batch is a free service providing cost-effective and secure solutions for both the infrastructure and the various stages of batch processing typically used with risk grid computing models.</span></span> <span data-ttu-id="67b3e-112">Azure Batch 可以使用混合式網路或將整個 Batch 處理移往 Azure，藉此增強、擴充或甚至取代目前的內部部署計算資源投資。</span><span class="sxs-lookup"><span data-stu-id="67b3e-112">Azure Batch can augment, extend, or even replace current on-premises compute resource investments using hybrid networks or by moving the entire Batch process into Azure.</span></span>  <span data-ttu-id="67b3e-113">資料可以上下周遊雲端或留在內部部署設施，而當內部部署資源不足時，計算節點能以高載到雲端的方式來處理其他資料。</span><span class="sxs-lookup"><span data-stu-id="67b3e-113">Data can traverse up and down from the cloud or stay on-premises while other data can be processed by compute nodes in a burst-to-cloud model when on-premises resources run low.</span></span>

## <a name="anatomy-of-a-batch-run"></a><span data-ttu-id="67b3e-114">Batch 執行剖析</span><span class="sxs-lookup"><span data-stu-id="67b3e-114">Anatomy of a Batch run</span></span>

<span data-ttu-id="67b3e-115">Batch 執行通常涉及至少兩個應用程式。</span><span class="sxs-lookup"><span data-stu-id="67b3e-115">There are typically at least two applications involved in a Batch run.</span></span> <span data-ttu-id="67b3e-116">在「前端節點」執行的應用程式通常會將作業提交到集區，有時候還會協調計算節點。</span><span class="sxs-lookup"><span data-stu-id="67b3e-116">One application, typically run on a “head node,” submits the job to the pool and sometimes orchestrates the compute nodes.</span></span> <span data-ttu-id="67b3e-117">協調流程也可以透過 Azure 入口網站來設定。</span><span class="sxs-lookup"><span data-stu-id="67b3e-117">The orchestration can also be configured via the Azure portal.</span></span> <span data-ttu-id="67b3e-118">另一個應用程式則是由計算節點以工作形式執行 (請參閱圖 1)。</span><span class="sxs-lookup"><span data-stu-id="67b3e-118">The other application is run by the compute nodes as a task (see Figure 1).</span></span>

<span data-ttu-id="67b3e-119">計算節點應用程式負責執行平行處理風險模型檔案的工作。</span><span class="sxs-lookup"><span data-stu-id="67b3e-119">The compute node application performs the task of parallel processing risk modeling files.</span></span> <span data-ttu-id="67b3e-120">可以在計算節點上安裝並執行一個以上的應用程式。</span><span class="sxs-lookup"><span data-stu-id="67b3e-120">There can be more than one application installed and run on the compute nodes.</span></span>

<span data-ttu-id="67b3e-121">可以透過 [Batch API](/azure/batch/batch-apis-tools?WT.mc_id=gridbanksg-docs-dastarr) 上傳這些應用程式，也可以直接透過 Azure 入口網站或是[適用於 Batch 的 Azure CLI 命令](/azure/batch/cli-samples?WT.mc_id=gridbanksg-docs-dastarr)上傳。</span><span class="sxs-lookup"><span data-stu-id="67b3e-121">These applications can be uploaded via the [Batch API](/azure/batch/batch-apis-tools?WT.mc_id=gridbanksg-docs-dastarr), directly through the Azure Portal, or via the [Azure CLI commands for Batch](/azure/batch/cli-samples?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

![Azure Batch 網格運算](./assets/risk-grid-compute-assets/05-batch-grid-computing.png)

<span data-ttu-id="67b3e-123">**圖 1：** Azure Batch 網格運算</span><span class="sxs-lookup"><span data-stu-id="67b3e-123">**Figure 1:** Azure Batch grid computing</span></span>

<span data-ttu-id="67b3e-124">Batch 執行由數個邏輯元素所組成。</span><span class="sxs-lookup"><span data-stu-id="67b3e-124">A Batch run consists of several logical elements.</span></span> <span data-ttu-id="67b3e-125">圖 2 顯示的是批次工作的邏輯模型。</span><span class="sxs-lookup"><span data-stu-id="67b3e-125">Figure 2 shows the logical model of a batch job.</span></span> <span data-ttu-id="67b3e-126">集區是用於容納涉及 Batch 執行之 VM 的容器，能佈建計算節點 VM。</span><span class="sxs-lookup"><span data-stu-id="67b3e-126">A pool is a container for the VMs involved in the Batch run and provisions the compute node VMs.</span></span> <span data-ttu-id="67b3e-127">集區也是用於容納計算節點上安裝之應用程式的容器。</span><span class="sxs-lookup"><span data-stu-id="67b3e-127">A pool is also the container for the applications installed on the compute nodes.</span></span> <span data-ttu-id="67b3e-128">作業會在集區內建立及執行。</span><span class="sxs-lookup"><span data-stu-id="67b3e-128">Jobs are created and run within the pool.</span></span> <span data-ttu-id="67b3e-129">工作則是由作業所執行。</span><span class="sxs-lookup"><span data-stu-id="67b3e-129">Tasks are executed by the jobs.</span></span> <span data-ttu-id="67b3e-130">工作是背景工作角色應用程式的執行動作，可以透過命令列指示叫用。</span><span class="sxs-lookup"><span data-stu-id="67b3e-130">Tasks are a run of the worker application and are invoked by a command line instruction.</span></span>

<span data-ttu-id="67b3e-131">背景工作角色應用程式會在建立時安裝到計算節點。</span><span class="sxs-lookup"><span data-stu-id="67b3e-131">The worker application is installed to the compute node when it is created.</span></span>

![集區、作業和工作](./assets/risk-grid-compute-assets/06-pool-job-logical-model.png)

<span data-ttu-id="67b3e-133">**圖 2：** 邏輯 Batch 概念模型</span><span class="sxs-lookup"><span data-stu-id="67b3e-133">**Figure 2:** Logical Batch concept model</span></span>

<span data-ttu-id="67b3e-134">作業執行時，集區會佈建任何所需的背景工作角色 VM，並安裝背景工作角色應用程式。</span><span class="sxs-lookup"><span data-stu-id="67b3e-134">When the job executes, the pool provisions any worker VMs needed and installs the worker applications.</span></span> <span data-ttu-id="67b3e-135">作業會將工作指派給這些計算節點，計算節點會接著執行命令列指示，通常會呼叫已安裝的應用程式或指令碼。</span><span class="sxs-lookup"><span data-stu-id="67b3e-135">The job assigns tasks to those compute nodes, which in turn run a command line instruction which typically calls the installed applications or scripts.</span></span>
<span data-ttu-id="67b3e-136">使用 Batch 一般需要按照典型模式，如下所述：</span><span class="sxs-lookup"><span data-stu-id="67b3e-136">Using Batch typically follows a prototypical pattern, described as follows:</span></span>

1. <span data-ttu-id="67b3e-137">建立包含 Batch 資產的資源群組。</span><span class="sxs-lookup"><span data-stu-id="67b3e-137">Create a resource group to contain the Batch assets.</span></span>
2. <span data-ttu-id="67b3e-138">在新的資源群組中建立 Batch 帳戶。</span><span class="sxs-lookup"><span data-stu-id="67b3e-138">Within the resource group, create a Batch account.</span></span>
3. <span data-ttu-id="67b3e-139">建立連結的儲存體帳戶。</span><span class="sxs-lookup"><span data-stu-id="67b3e-139">Create a linked storage account.</span></span>
4. <span data-ttu-id="67b3e-140">建立集區以在其中佈建背景工作角色 VM。</span><span class="sxs-lookup"><span data-stu-id="67b3e-140">Create a pool in which to provision the worker VMs.</span></span>
5. <span data-ttu-id="67b3e-141">將計算節點應用程式或指令碼上傳到集區。</span><span class="sxs-lookup"><span data-stu-id="67b3e-141">Upload the compute node application or scripts to the pool.</span></span>
6. <span data-ttu-id="67b3e-142">建立作業以將工作指派給集區中的 VM。</span><span class="sxs-lookup"><span data-stu-id="67b3e-142">Create a job to assign tasks to the VMs in the pool.</span></span>
7. <span data-ttu-id="67b3e-143">將作業新增至集區。</span><span class="sxs-lookup"><span data-stu-id="67b3e-143">Add the job to the pool.</span></span>
8. <span data-ttu-id="67b3e-144">開始 Batch 執行。</span><span class="sxs-lookup"><span data-stu-id="67b3e-144">Begin the Batch run.</span></span>
9. <span data-ttu-id="67b3e-145">作業佇列工作會在計算節點上執行。</span><span class="sxs-lookup"><span data-stu-id="67b3e-145">The job queues tasks to run on the compute nodes.</span></span>
10. <span data-ttu-id="67b3e-146">計算節點會在 VM 可供使用時執行工作。</span><span class="sxs-lookup"><span data-stu-id="67b3e-146">Compute nodes run the tasks as the VMs become available.</span></span>

<span data-ttu-id="67b3e-147">上述流程的圖例如圖 3 所示。</span><span class="sxs-lookup"><span data-stu-id="67b3e-147">An illustration of this process is show in Figure 3.</span></span>

![Batch 執行流程](./assets/risk-grid-compute-assets/07-batch-run-process.png)

<span data-ttu-id="67b3e-149">**圖 3：** 邏輯 Batch 概念模型</span><span class="sxs-lookup"><span data-stu-id="67b3e-149">**Figure 3:** Logical Batch concept model</span></span>

<span data-ttu-id="67b3e-150">工作完成後，很適合用來移除計算節點，以免在不使用時產生費用。</span><span class="sxs-lookup"><span data-stu-id="67b3e-150">Once tasks are complete, it can be useful to remove the compute nodes to not incur fees while not in use.</span></span> <span data-ttu-id="67b3e-151">若要刪除這些節點，使用者可透過程式碼或入口網站刪除容納集區，如此會移除背景工作角色 VM。</span><span class="sxs-lookup"><span data-stu-id="67b3e-151">To delete them, via code or the portal, one can delete the containing pool, which will remove the worker VMs.</span></span>

<span data-ttu-id="67b3e-152">如需 Batch 使用方式的逐步入門說明，有多種語言的 [5 分鐘快速入門](/azure/batch/?WT.mc_id=gridbanksg-docs-dastarr)可帶您認識流程或熟悉 Azure 入口網站。</span><span class="sxs-lookup"><span data-stu-id="67b3e-152">For more detailed walkthroughs on how to get starting with Batch, [5-minute Quickstarts](/azure/batch/?WT.mc_id=gridbanksg-docs-dastarr) are available to take you through the process in several languages or through the Azure portal.</span></span>

## <a name="batch-process-scheduling"></a><span data-ttu-id="67b3e-153">Batch 處理排程</span><span class="sxs-lookup"><span data-stu-id="67b3e-153">Batch process scheduling</span></span>

<span data-ttu-id="67b3e-154">Azure Batch 有內建的排程器，因此您可到入口網站或透過 API 定義每次執行的排程。</span><span class="sxs-lookup"><span data-stu-id="67b3e-154">Azure Batch has a scheduler built in so scheduling of each run can be defined in the portal or through APIs.</span></span> <span data-ttu-id="67b3e-155">Batch 作業排程器可以定義多個排程來引發多個作業。</span><span class="sxs-lookup"><span data-stu-id="67b3e-155">The Batch job scheduler can define multiple schedules to fire multiple jobs.</span></span> <span data-ttu-id="67b3e-156">每個作業都有自己的屬性，例如在工作開始及結束時應做的動作。</span><span class="sxs-lookup"><span data-stu-id="67b3e-156">Each job has its own properties such as what to do when the job starts and ends.</span></span> <span data-ttu-id="67b3e-157">作業排程可以設定為按週期的間隔執行，或者單次執行。</span><span class="sxs-lookup"><span data-stu-id="67b3e-157">Job schedules can be set on recurring intervals or for a one-time run.</span></span>

<span data-ttu-id="67b3e-158">許多銀行網格運算系統已經有專屬的排程服務，</span><span class="sxs-lookup"><span data-stu-id="67b3e-158">Many bank grid computing systems already have their own scheduling service.</span></span> <span data-ttu-id="67b3e-159">因此將自己的排程器移動到 Azure 並非當務之急。</span><span class="sxs-lookup"><span data-stu-id="67b3e-159">There may be no immediate need to move my scheduler to Azure.</span></span> <span data-ttu-id="67b3e-160">排程之所以能順暢運作，是因為 Azure Batch 能以手動方式或透過 SDK 叫用，使得排程仍然可以在內部部署中發生，而且在 Azure 中處理工作負載。</span><span class="sxs-lookup"><span data-stu-id="67b3e-160">This can work seamlessly because Azure Batch may be invoked manually or through an SDK, allowing scheduling to still occur on-premises and workloads to be processed in Azure.</span></span>

<span data-ttu-id="67b3e-161">Batch 處理可以依照預先決定的排程或視需要執行，不過在任何情況下，只要不使用計算節點 VM，就不需要讓 VM 保持運作。</span><span class="sxs-lookup"><span data-stu-id="67b3e-161">Batch processing can happen on a predetermined schedule or on demand, but in either case there is no need to keep compute node VMs alive when they aren’t being used.</span></span>  <span data-ttu-id="67b3e-162">如果在使用數百個甚至數千個 VM 計算節點，只要在 VM 完成自身排入佇列的工作後，將伺服器取消佈建，就能大幅節約費用。</span><span class="sxs-lookup"><span data-stu-id="67b3e-162">When using hundreds, if not thousands, of VM compute nodes, significant cost savings can be realized by de-provisioning the servers when they are done running their queued tasks.</span></span>

## <a name="compute-node-applications"></a><span data-ttu-id="67b3e-163">計算節點應用程式</span><span class="sxs-lookup"><span data-stu-id="67b3e-163">Compute node applications</span></span>

<span data-ttu-id="67b3e-164">在叫用工作時，計算節點需要有可執行的應用程式。</span><span class="sxs-lookup"><span data-stu-id="67b3e-164">Compute nodes need an application to run when a task is invoked.</span></span> <span data-ttu-id="67b3e-165">這類應用程式由企業撰寫，安裝在背景工作角色上後，可用於執行處理作業。</span><span class="sxs-lookup"><span data-stu-id="67b3e-165">These applications are written by the business to perform the processing jobs when installed on the workers.</span></span> <span data-ttu-id="67b3e-166">就銀行業的風險網格運算案例來看，這類應用程式通常負責將資料轉換成多種格式，特別是適合下游分析或其他處理的格式。</span><span class="sxs-lookup"><span data-stu-id="67b3e-166">In risk grid computing for banking scenarios this this application often takes on the job of transforming data into formats especially suited for downstream analytics or other processing.</span></span>

<span data-ttu-id="67b3e-167">將應用程式提供到集區以便分發到計算節點時，會以應用程式封裝的形式上傳。</span><span class="sxs-lookup"><span data-stu-id="67b3e-167">When providing the application to the pool for distribution to compute nodes, it is uploaded in an application package.</span></span> <span data-ttu-id="67b3e-168">應用程式封裝可以是先前上傳之應用程式封裝的另一個版本。</span><span class="sxs-lookup"><span data-stu-id="67b3e-168">An application package may be another version of a previously uploaded application package.</span></span> <span data-ttu-id="67b3e-169">一個計算節點可以安裝多個應用程式封裝。</span><span class="sxs-lookup"><span data-stu-id="67b3e-169">More than one application package can be installed to one compute node.</span></span> <span data-ttu-id="67b3e-170">作業包含了要載入到背景工作角色電腦的應用程式封裝。</span><span class="sxs-lookup"><span data-stu-id="67b3e-170">The job contains the applications packages to load onto the worker machines.</span></span>

<span data-ttu-id="67b3e-171">也可以依版本來管理應用程式封裝部署。</span><span class="sxs-lookup"><span data-stu-id="67b3e-171">Application package deployment may also be managed by version.</span></span> <span data-ttu-id="67b3e-172">如果已將多個應用程式封裝版本載入集區，您可以指定 Batch 執行時要使用哪個特定版本，如圖 4 所示。</span><span class="sxs-lookup"><span data-stu-id="67b3e-172">If multiple versions of an application package have been loaded into a pool, a specific version may be designated for use in a Batch run as shown in Figure 4.</span></span> <span data-ttu-id="67b3e-173">當在稽核環境中，或是企業想要在重現前一次的執行時，這是必要的步驟。</span><span class="sxs-lookup"><span data-stu-id="67b3e-173">This may be necessary in audit environments or when the business wants to reproduce a prior run.</span></span> <span data-ttu-id="67b3e-174">如果有錯誤導入了背景工作角色應用程式，也能透過這個步驟復原。</span><span class="sxs-lookup"><span data-stu-id="67b3e-174">It can also be used for roll-back purposes if a bug is introduced to the worker application.</span></span>

![Batch 執行流程](./assets/risk-grid-compute-assets/08-versioning-worker-applications.png)

<span data-ttu-id="67b3e-176">**圖 4：** 設定計算節點工作應用程式的版本</span><span class="sxs-lookup"><span data-stu-id="67b3e-176">**Figure 4:** Versioning compute node task applications</span></span>

<span data-ttu-id="67b3e-177">上傳到集區的應用程式封裝會採用 .zip 檔案形式，其中包含工作執行應用程式所需的應用程式二進位檔案和支援檔案。</span><span class="sxs-lookup"><span data-stu-id="67b3e-177">An application package is uploaded to the pool as a .zip file containing the application binaries and supporting files required for tasks to run the application.</span></span> <span data-ttu-id="67b3e-178">應用程式封裝有 2 個範圍。</span><span class="sxs-lookup"><span data-stu-id="67b3e-178">There are 2 scopes for application packages.</span></span> <span data-ttu-id="67b3e-179">您可以在集區範圍或工作範圍內指定應用程式封裝。</span><span class="sxs-lookup"><span data-stu-id="67b3e-179">You can designate an application package in scope of the pool, or in the scope of tasks.</span></span>

## <a name="pool-application-packages"></a><span data-ttu-id="67b3e-180">集區應用程式封裝</span><span class="sxs-lookup"><span data-stu-id="67b3e-180">Pool application packages</span></span>

<span data-ttu-id="67b3e-181">這些封裝會部署到集區中的每個計算節點。</span><span class="sxs-lookup"><span data-stu-id="67b3e-181">These packages are deployed to every compute node in the pool.</span></span> <span data-ttu-id="67b3e-182">在佈建、重新啟動計算節點 VM 或重新安裝其映像時，如果有更新版本的應用程式存在，即會安裝新一份集區應用程式封裝。</span><span class="sxs-lookup"><span data-stu-id="67b3e-182">When a compute node VM is provisioned, rebooted or reimaged, a new copy of any pool application packages is installed, should an updated application exist.</span></span> <span data-ttu-id="67b3e-183">您可以將一個或一個以上的應用程式封裝指派給集區，也就是計算節點會獲得所有指定的封裝。</span><span class="sxs-lookup"><span data-stu-id="67b3e-183">One or more application packages can be assigned to a pool, which means the compute nodes will get all packages designated.</span></span>

## <a name="task-application-packages"></a><span data-ttu-id="67b3e-184">工作應用程式封裝</span><span class="sxs-lookup"><span data-stu-id="67b3e-184">Task application packages</span></span>

<span data-ttu-id="67b3e-185">針對工作層級的應用程式封裝，只會安裝到排定要執行某項工作的計算節點上。</span><span class="sxs-lookup"><span data-stu-id="67b3e-185">Application packages targeting the task level are only installed to compute nodes scheduled to run a task.</span></span> <span data-ttu-id="67b3e-186">工作應用程式封裝適用於當一個集區中有多個工作要執行的情況。</span><span class="sxs-lookup"><span data-stu-id="67b3e-186">Task applications packages are intended for use when more than one job is run in one pool.</span></span>

<span data-ttu-id="67b3e-187">在彙總集區層級作業產生的資料時，工作應用程式就能派上用場，這類資料可能與風險網格運算案例息息相關。</span><span class="sxs-lookup"><span data-stu-id="67b3e-187">Task applications are useful when aggregating data produced by pool-level jobs, which can be relevant in risk grid computing scenarios.</span></span> <span data-ttu-id="67b3e-188">舉例而言，工作應用程式可能會執行一組風險計算，稍後再將產生的資料用於風險計算工作流程。</span><span class="sxs-lookup"><span data-stu-id="67b3e-188">For example, a task application may run a set of risk calculations which generate data to be used later in the risk calculation workflow.</span></span>

## <a name="scaling-batch-jobs"></a><span data-ttu-id="67b3e-189">調整批次作業</span><span class="sxs-lookup"><span data-stu-id="67b3e-189">Scaling batch jobs</span></span>

<span data-ttu-id="67b3e-190">銀行通常會在計算資源使用率較低的週末或夜間進行風險分析批次執行。</span><span class="sxs-lookup"><span data-stu-id="67b3e-190">Banks often perform risk analysis batch runs over weekends or at night when computing resources are underutilized.</span></span> <span data-ttu-id="67b3e-191">雖然這個模型適用於部分銀行，不過很快便會不敷使用，而需要投入更多資金，將更多背景工作角色電腦加入網格。</span><span class="sxs-lookup"><span data-stu-id="67b3e-191">While this model works for some, it can quickly be outgrown, requiring more capital to add more worker machines to the grid.</span></span>

<span data-ttu-id="67b3e-192">如果 Batch 作業的執行時間太長，或是想要為 Batch 執行增設更多運算能力，Azure 提供了幾個選項。</span><span class="sxs-lookup"><span data-stu-id="67b3e-192">If Batch jobs are taking too long to run or you want more computing power in your Batch runs, Azure offers several options.</span></span>

1. <span data-ttu-id="67b3e-193">配置更多計算節點電腦加以擴充。</span><span class="sxs-lookup"><span data-stu-id="67b3e-193">Allocate more compute node machines to scale out.</span></span>
2. <span data-ttu-id="67b3e-194">配置能力較強的計算節點電腦以相應增加。</span><span class="sxs-lookup"><span data-stu-id="67b3e-194">Allocate more powerful compute node machines to scale up.</span></span> <span data-ttu-id="67b3e-195">可以佈建 Azure 電腦來滿足對核心、記憶體甚至 GPU 運算能力的高效能需求。</span><span class="sxs-lookup"><span data-stu-id="67b3e-195">Azure machines may be provisioned to meet high performance needs of for cores and memory, and even GPU computing power.</span></span>

> <span data-ttu-id="67b3e-196">注意：Microsoft HPC Pack 搭配 Batch 是較複雜的模型，本文不予討論。</span><span class="sxs-lookup"><span data-stu-id="67b3e-196">Note: Using Microsoft HPC Pack with Batch is a more complex model and is not discussed in this article.</span></span>

<span data-ttu-id="67b3e-197">在 Batch 處理叢集中，少至兩部處理 VM，多至在數千個 VM 計算節點上以上萬顆核心處理數千個並行工作，都有可能。</span><span class="sxs-lookup"><span data-stu-id="67b3e-197">In a Batch processing cluster, there may be as few as two processing VMs, or thousands of simultaneous tasks running on thousands of VM compute nodes with tens of thousands of cores.</span></span> <span data-ttu-id="67b3e-198">每部 VM 負責每次執行一件工作。</span><span class="sxs-lookup"><span data-stu-id="67b3e-198">Each VM is responsible for running a single task at a time.</span></span> <span data-ttu-id="67b3e-199">集區中的 VM 數目能以手動方式調整，抑或是設定為隨著負載增減而自動調整。</span><span class="sxs-lookup"><span data-stu-id="67b3e-199">The number of VMs in a pool may be scaled manually or automatically as configured when load increases or decreases.</span></span>

### <a name="burst-to-cloud"></a><span data-ttu-id="67b3e-200">高載至雲端</span><span class="sxs-lookup"><span data-stu-id="67b3e-200">Burst to cloud</span></span>

<span data-ttu-id="67b3e-201">當內部部署網格中的計算資源因執行大型分析作業而不足時，「高載至雲端」能在 Azure 中新增更多計算節點，藉此補強這些資源。</span><span class="sxs-lookup"><span data-stu-id="67b3e-201">When compute resources in an on-premises grid are running low due to executing a large analysis job, “burst to cloud” offers a way to augment those resources by adding more compute nodes in Azure.</span></span> <span data-ttu-id="67b3e-202">高載至雲端是一種模型，當對於內部部署資源的需求過高時，私人雲端或基礎結構會將工作負載分散到雲端伺服器上。</span><span class="sxs-lookup"><span data-stu-id="67b3e-202">Burst to cloud is a model in which private clouds or infrastructure distribute their workload to cloud servers when demand is high for on-premises resources.</span></span>

<span data-ttu-id="67b3e-203">可以預先將這些計算節點設為要在 Azure 的 IaaS 平台上佈建的 Linux 或 Windows 虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="67b3e-203">These compute nodes can be pre-configured as Linux or Windows virtual machines to be provisioned in Azure’s IaaS platform.</span></span> <span data-ttu-id="67b3e-204">此外，可以將伺服器佈建並自動設定為使用 Tibco Gridserver 和 IBM Symphony 等現有投資。</span><span class="sxs-lookup"><span data-stu-id="67b3e-204">Further, servers can be provisioned and automatically configured to work with existing investments like Tibco Gridserver and IBM Symphony.</span></span>

### <a name="automatic-scaling-formulas"></a><span data-ttu-id="67b3e-205">自動調整公式</span><span class="sxs-lookup"><span data-stu-id="67b3e-205">Automatic scaling formulas</span></span>

<span data-ttu-id="67b3e-206">這項彈性功能可以在 Azure 入口網站設定，或使用[自動調整公式](/azure/batch/batch-automatic-scaling?WT.mc_id=gridbanksg-docs-dastarr)設定。</span><span class="sxs-lookup"><span data-stu-id="67b3e-206">This elasticity can be configured in the Azure portal or by using [automatic scaling formulas](/azure/batch/batch-automatic-scaling?WT.mc_id=gridbanksg-docs-dastarr).</span></span> <span data-ttu-id="67b3e-207">自動調整公式是上傳到 Batch 處理排程器的指令碼，能精密控制 Batch 的行為。</span><span class="sxs-lookup"><span data-stu-id="67b3e-207">Automatic scaling formulas are scripts uploaded to the Batch processing scheduler for fine-grained control of Batch behavior.</span></span> <span data-ttu-id="67b3e-208">計算節點集區的自動調整，是由建立自動調整公式與節點之間的關聯來實現。</span><span class="sxs-lookup"><span data-stu-id="67b3e-208">Automatic scaling on a pool of compute nodes is done by associating the nodes with auto-scale formulas.</span></span>

<span data-ttu-id="67b3e-209">以下是自動調整公式的範例，自動調整會由一部 VM 開始，視需要相應增加至 50 部。</span><span class="sxs-lookup"><span data-stu-id="67b3e-209">Below is an example of an automatic scaling formula directing auto scaling to start with one VM and scale up to 50 VMs as needed.</span></span> <span data-ttu-id="67b3e-210">隨著工作完成，VM 會逐一閒置，而自動調整公式會將集區縮小。</span><span class="sxs-lookup"><span data-stu-id="67b3e-210">As tasks complete, VMs become free one by one and the auto scaling formula shrinks the pool.</span></span>

```Formula
startingNumberOfVMs = 1;
maxNumberofVMs = 50;
pendingTaskSamplePercent = $PendingTasks.GetSamplePercent(180 * TimeInterval_Second);
pendingTaskSamples = pendingTaskSamplePercent < 70 ? startingNumberOfVMs : avg($PendingTasks.GetSample(180 * TimeInterval_Second));
$TargetDedicatedNodes=min(maxNumberofVMs, pendingTaskSamples);
```

### <a name="other-scaling-techniques"></a><span data-ttu-id="67b3e-211">其他調整技術</span><span class="sxs-lookup"><span data-stu-id="67b3e-211">Other scaling techniques</span></span>

<span data-ttu-id="67b3e-212">自動調整也可以透過 Enable-AzureBatchAutoScale PowerShell Cmdlet 來啟用。</span><span class="sxs-lookup"><span data-stu-id="67b3e-212">Automatic scaling can also be enabled by the Enable-AzureBatchAutoScale PowerShell cmdlet.</span></span> <span data-ttu-id="67b3e-213">Enable-AzureBatchAutoScale Cmdlet 可讓您自動調整指定的集區。</span><span class="sxs-lookup"><span data-stu-id="67b3e-213">The Enable-AzureBatchAutoScale cmdlet enables automatic scaling of the specified pool.</span></span> <span data-ttu-id="67b3e-214">範例如下。</span><span class="sxs-lookup"><span data-stu-id="67b3e-214">An example follows.</span></span>

1. <span data-ttu-id="67b3e-215">第一個命令負責定義公式，再將之儲存到 `$Formula` 變數。</span><span class="sxs-lookup"><span data-stu-id="67b3e-215">The first command defines a formula, and then saves it to the `$Formula` variable.</span></span>
2. <span data-ttu-id="67b3e-216">第二個命令會使用 `$Formula` 中的公式，替名為 `RiskGridPool` 的集區啟用自動調整。</span><span class="sxs-lookup"><span data-stu-id="67b3e-216">The second command enables automatic scaling on the pool named `RiskGridPool` using the formula in `$Formula`.</span></span>

```console
C:\> $Formula = ‘startingNumberOfVMs = 1;
maxNumberofVMs = 50;
pendingTaskSamplePercent = $PendingTasks.GetSamplePercent(180 * TimeInterval_Second?WT.mc_id=gridbanksg-docs-dastarr);
pendingTaskSamples = pendingTaskSamplePercent < 70 ? startingNumberOfVMs : avg($PendingTasks.GetSample(180 * TimeInterval_Second));
$TargetDedicatedNodes=min(maxNumberofVMs, pendingTaskSamples);’;

C:\> Enable-AzureBatchAutoScale -Id "RiskGridPool" -AutoScaleFormula $Formula -BatchContext $Context
```

<span data-ttu-id="67b3e-217">也可以使用 Azure CLI 搭配 `az batch pool resize` 命令，並使用 Azure 入口網站來進行調整。</span><span class="sxs-lookup"><span data-stu-id="67b3e-217">Scaling can also be accomplished using the Azure CLI with the `az batch pool resize` command and the Azure Portal.</span></span>

## <a name="data-storage-and-retention"></a><span data-ttu-id="67b3e-218">資料儲存和保留</span><span class="sxs-lookup"><span data-stu-id="67b3e-218">Data storage and retention</span></span>

<span data-ttu-id="67b3e-219">等到資料內嵌並經過計算節點處理後，產生的輸出資料可以儲存在資料庫中，以供進一步處理與分析，或是在內嵌時先行轉換後再儲存，確保格式適合下游處理。</span><span class="sxs-lookup"><span data-stu-id="67b3e-219">Once data is ingested and processed by a compute node, the resulting output data may be stored in a database for further processing and analysis or transformed upon ingestion before storage to ensure proper formats for downstream processing.</span></span> <span data-ttu-id="67b3e-220">Microsoft Azure 提供幾個儲存選項。</span><span class="sxs-lookup"><span data-stu-id="67b3e-220">Microsoft Azure offers several storage options.</span></span> <span data-ttu-id="67b3e-221">[要使用哪一項資料存放區技術](/azure/architecture/data-guide/?WT.mc_id=gridbanksg-docs-dastarr)的選擇，主要取決於下游處理的分析和報告需求。</span><span class="sxs-lookup"><span data-stu-id="67b3e-221">The choice of [which data store technology to use](/azure/architecture/data-guide/?WT.mc_id=gridbanksg-docs-dastarr) depends largely on analysis and or reporting needs in downstream processes.</span></span>

<span data-ttu-id="67b3e-222">使用混合式網路時，資料儲存目標可能為內部部署。</span><span class="sxs-lookup"><span data-stu-id="67b3e-222">When using a hybrid network, the data storage target may be on-premises.</span></span> <span data-ttu-id="67b3e-223">透過混合式網路使用 Batch 時，計算節點可以將資料寫回內部部署資料存放區，而不使用 Azure 儲存位置。</span><span class="sxs-lookup"><span data-stu-id="67b3e-223">When using Batch over a hybrid network, compute nodes can write data back to an on-premises data store without using an Azure-based storage location.</span></span> <span data-ttu-id="67b3e-224">背景工作角色也可以寫入 Azure 檔案儲存體，該儲存體能以磁碟形式掛接在內部部署電腦上，以便會使用到內部部署檔案的流程存取。</span><span class="sxs-lookup"><span data-stu-id="67b3e-224">Workers can also write to Azure File storage, which can be mounted as a disk on an on-premises machine for easy access by any process that works with the files on-premises.</span></span>

## <a name="monitoring-and-logging"></a><span data-ttu-id="67b3e-225">監視和記錄</span><span class="sxs-lookup"><span data-stu-id="67b3e-225">Monitoring and logging</span></span>

<span data-ttu-id="67b3e-226">為了將未來 Batch 作業的執行最佳化，請記錄資料以找出最佳化區域。</span><span class="sxs-lookup"><span data-stu-id="67b3e-226">To optimize future runs of the Batch job, data should be recorded to help identify areas of optimization.</span></span> <span data-ttu-id="67b3e-227">舉例而言，如果背景工作角色執行時接近 CPU 的能力極限，增加計算節點的核心有助於避免過度佔用 CPU 資源，而且還可以更快完成作業。</span><span class="sxs-lookup"><span data-stu-id="67b3e-227">For example, if workers are running near CPU capacity, adding cores to the compute nodes may help avoid being CPU-bound and the job can finish faster.</span></span> <span data-ttu-id="67b3e-228">在 Batch 作業中，每個應用程式的執行都有自己的特性，因此若要針對 Batch 執行中的 VM 進行最佳化，方法也不盡相同。</span><span class="sxs-lookup"><span data-stu-id="67b3e-228">Each application run in the Batch job has its own characteristics and the optimizations made to the VMs in the Batch runs may differ.</span></span> <span data-ttu-id="67b3e-229">若是記憶體密集的工作，可在下一次執行時以不同的方式設定電腦，藉以配置更多記憶體。</span><span class="sxs-lookup"><span data-stu-id="67b3e-229">For memory intensive tasks, more memory can be allocated by configuring the machines differently in the next run.</span></span>

<span data-ttu-id="67b3e-230">可以由計算節點和格線前端應用程式負責記錄，或使用 [Batch 診斷記錄](/azure/batch/batch-diagnostics?WT.mc_id=gridbanksg-docs-dastarr)來進行。</span><span class="sxs-lookup"><span data-stu-id="67b3e-230">Logging can be done by the compute node and grid head applications or by a job using [Batch Diagnostic Logging](/azure/batch/batch-diagnostics?WT.mc_id=gridbanksg-docs-dastarr).</span></span> <span data-ttu-id="67b3e-231">您可以設定 Batch 執行效能的相干記錄資訊，找出有哪些區域可加以改善，以提高效能並縮短工作完成時間。</span><span class="sxs-lookup"><span data-stu-id="67b3e-231">Logging information about the performance of the Batch runs can be configured to help identify which areas to improve for better performance and faster task completion.</span></span>

### <a name="custom-batch-monitoring-and-logging"></a><span data-ttu-id="67b3e-232">自訂 Batch 監視和記錄</span><span class="sxs-lookup"><span data-stu-id="67b3e-232">Custom Batch monitoring and logging</span></span>

<span data-ttu-id="67b3e-233">控制用的應用程式和計算節點應用程式可以產生及儲存這些資料，以供進一步分析。</span><span class="sxs-lookup"><span data-stu-id="67b3e-233">The controlling application and compute node applications can generate this data and store it for further analysis.</span></span> <span data-ttu-id="67b3e-234">找到的資料有助於將 Batch 作業最佳化，其中包括：</span><span class="sxs-lookup"><span data-stu-id="67b3e-234">Data found helpful in optimizing Batch jobs includes:</span></span>

- <span data-ttu-id="67b3e-235">每件工作的開始和結束時間</span><span class="sxs-lookup"><span data-stu-id="67b3e-235">Start and end times for each task</span></span>
- <span data-ttu-id="67b3e-236">每個計算節點保持運作和執行工作的時間</span><span class="sxs-lookup"><span data-stu-id="67b3e-236">The time each compute node is alive and running tasks</span></span>
- <span data-ttu-id="67b3e-237">每個計算節點保持運作但未執行工作的時間</span><span class="sxs-lookup"><span data-stu-id="67b3e-237">The time each compute node is alive and not running tasks</span></span>
- <span data-ttu-id="67b3e-238">整體的批次作業執行時間</span><span class="sxs-lookup"><span data-stu-id="67b3e-238">The overall batch job run time</span></span>

### <a name="batch-diagnostic-logging"></a><span data-ttu-id="67b3e-239">Batch 診斷記錄</span><span class="sxs-lookup"><span data-stu-id="67b3e-239">Batch Diagnostic Logging</span></span>

<span data-ttu-id="67b3e-240">若不使用控制器和計算節點應用程式來發出檢測資料，還有一種替代方案。</span><span class="sxs-lookup"><span data-stu-id="67b3e-240">There is an alternative to using the controller and compute node applications to emit instrumentation data.</span></span> <span data-ttu-id="67b3e-241">[Batch 診斷記錄](/azure/batch/batch-diagnostics?WT.mc_id=gridbanksg-docs-dastarr)可以擷取大量的執行資料。</span><span class="sxs-lookup"><span data-stu-id="67b3e-241">[Batch Diagnostics Logging](/azure/batch/batch-diagnostics?WT.mc_id=gridbanksg-docs-dastarr) can capture a lot of the run data.</span></span> <span data-ttu-id="67b3e-242">Batch 診斷記錄預設為不啟用，而且必須針對 Batch 帳戶啟用。</span><span class="sxs-lookup"><span data-stu-id="67b3e-242">Batch Diagnostic Logging is not enabled by default and must be enabled for the Batch account.</span></span>

<span data-ttu-id="67b3e-243">Batch 診斷記錄能提供大量資料，有助於排解疑難問題及最佳化批次執行。</span><span class="sxs-lookup"><span data-stu-id="67b3e-243">Batch Diagnostic Logging provides a significant amount of data aiding in trouble shooting and optimizing Batch runs.</span></span> <span data-ttu-id="67b3e-244">包括作業和工作的開始與結束時間、核心計數、節點總數和其他許多計量。</span><span class="sxs-lookup"><span data-stu-id="67b3e-244">Start and end times for job and tasks, core count, total node count and many other metrics.</span></span>

<span data-ttu-id="67b3e-245">Batch 記錄需要儲存目的地來存放發出的記錄，儲存 Batch 執行所產生的事件，如建立集區、執行作業、執行工作等。除了將診斷記錄事件儲存在 Azure 儲存體帳戶外，您也可以將 Batch 服務記錄事件串流處理到 [Azure 事件中樞](/azure/event-hubs/event-hubs-what-is-event-hubs?WT.mc_id=gridbanksg-docs-dastarr)，並傳送至 [Azure Log Analytics](/azure/log-analytics/log-analytics-overview?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="67b3e-245">Batch Logging requires a storage destination for the logs emitted, storing events produced by the Batch run such as pool creation, job execution, task execution, etc. In addition to storing diagnostic log events in an Azure Storage account, Batch Service Log events can be streamed to an [Azure Event Hub](/azure/event-hubs/event-hubs-what-is-event-hubs?WT.mc_id=gridbanksg-docs-dastarr), and sent to [Azure Log Analytics](/azure/log-analytics/log-analytics-overview?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

<span data-ttu-id="67b3e-246">這些資料能用來將核心計算和前端節點的應用程式最佳化。</span><span class="sxs-lookup"><span data-stu-id="67b3e-246">Using these data, core computing and head node applications may be optimized.</span></span> <span data-ttu-id="67b3e-247">這樣的做法能縮短背景工作角色 VM 不再需要時的取消佈建時間，不必等到 Batch 執行結束後再進行，因此能降低成本。</span><span class="sxs-lookup"><span data-stu-id="67b3e-247">This can lower costs due to things like faster deprovisioning worker VMs when they are no longer needed, rather than waiting for the end of the Batch run to complete.</span></span>

### <a name="batch-management-tools"></a><span data-ttu-id="67b3e-248">Batch 管理工具</span><span class="sxs-lookup"><span data-stu-id="67b3e-248">Batch management tools</span></span>

<span data-ttu-id="67b3e-249">Azure 入口網站提供 Batch 監視儀表板，能在作業執行時顯示 Batch 的相關資訊，甚至能顯示帳戶配額。</span><span class="sxs-lookup"><span data-stu-id="67b3e-249">The Azure portal provides a Batch monitoring dashboard which shows information about Batch as jobs are running and even account quota usage.</span></span> <span data-ttu-id="67b3e-250">這樣的功能足以滿足許多 Batch 作業應用程式的需求。</span><span class="sxs-lookup"><span data-stu-id="67b3e-250">It is sufficient for many Batch job applications.</span></span>

<span data-ttu-id="67b3e-251">Azure 入口網站除了提供 Batch 管理和視覺化工具之外，還有免費的開放原始碼 Batch 管理工具 [BatchLabs](https://github.com/Azure/BatchLabs)。</span><span class="sxs-lookup"><span data-stu-id="67b3e-251">In addition to the Batch management and visualization tools available in the Azure portal, there is a free open source tool, [BatchLabs](https://github.com/Azure/BatchLabs) for managing Batch.</span></span> <span data-ttu-id="67b3e-252">這是一款獨立的用戶端工具，可以協助您建立、偵錯及監視 Azure Batch 應用程式。</span><span class="sxs-lookup"><span data-stu-id="67b3e-252">This is a standalone client tool to help create, debug and monitor Azure Batch applications.</span></span> <span data-ttu-id="67b3e-253">下載適用於 Mac、Linux 或 Windows 的安裝套件。</span><span class="sxs-lookup"><span data-stu-id="67b3e-253">Download an installation package for Mac, Linux, or Windows.</span></span>

## <a name="network-models"></a><span data-ttu-id="67b3e-254">網路模型</span><span class="sxs-lookup"><span data-stu-id="67b3e-254">Network models</span></span>

<span data-ttu-id="67b3e-255">風險分析通常需要將數百甚至數千份文件內嵌到風險網格運算流程中。</span><span class="sxs-lookup"><span data-stu-id="67b3e-255">Risk analysis often requires hundreds, if not thousands, of documents to be ingested into the risk grid computing process.</span></span> <span data-ttu-id="67b3e-256">這些檔案通常是位於內部部署檔案存放區、網路共用或其他存放庫。</span><span class="sxs-lookup"><span data-stu-id="67b3e-256">These files are often located on-premises in a file store, network share, or other repository.</span></span> <span data-ttu-id="67b3e-257">若使用以 Azure 為基礎的 VM 來存取及處理這些檔案，讓內部部署網路與 Azure 網路緊密連接，便能簡單又快速地存取檔案。</span><span class="sxs-lookup"><span data-stu-id="67b3e-257">When using Azure-based VMs to access and process those files, it is often useful for the on-premises network to be seamlessly connected to the Azure network, so file access is simple and fast.</span></span> <span data-ttu-id="67b3e-258">這種方法甚至不必變更在計算節點上進行處理工作的程式碼。</span><span class="sxs-lookup"><span data-stu-id="67b3e-258">This approach may even mean no code changes are needed to the code doing the processing on the compute nodes.</span></span>

<span data-ttu-id="67b3e-259">Azure 提供兩種模型，供您將目前的內部部署系統安全可靠地連接到 Azure：[Microsoft Azure ExpressRoute](/azure/expressroute/expressroute-introduction?WT.mc_id=gridbanksg-docs-dastarr) 與 [VPN 閘道](/azure/vpn-gateway/?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="67b3e-259">Azure offers two models for securely and reliably connecting current on-premises systems to Azure, [Microsoft Azure ExpressRoute](/azure/expressroute/expressroute-introduction?WT.mc_id=gridbanksg-docs-dastarr) and [VPN Gateway](/azure/vpn-gateway/?WT.mc_id=gridbanksg-docs-dastarr).</span></span> <span data-ttu-id="67b3e-260">雖然實作方式、效能與[其他屬性](/azure/networking/networking-overview?WT.mc_id=gridbanksg-docs-dastarr)各不相同，不過這兩種模型都能提供安全可靠的連線能力。</span><span class="sxs-lookup"><span data-stu-id="67b3e-260">Both offer secure reliable connectivity, although there are differences in implementation, performance and [other attributes](/azure/networking/networking-overview?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

<span data-ttu-id="67b3e-261">若不使用前述做法，風險網格運算前端節點也可以存留在內部部署設施，並透過以 .NET 和其他語言撰寫的 REST API 或 SDK 執行 Batch 作業。</span><span class="sxs-lookup"><span data-stu-id="67b3e-261">Alternatively, the risk grid computing head node may live on-premises and execute the Batch job through the REST APIs or SDKs in .NET and other languages.</span></span>

<span data-ttu-id="67b3e-262">還有其他技術能不透過混合式網路解決方案，就橋接起 Azure 與內部部署資源之間的隔閡。</span><span class="sxs-lookup"><span data-stu-id="67b3e-262">There are other techniques for bridging the gap between Azure and on-premises resources without a hybrid network solution.</span></span> <span data-ttu-id="67b3e-263">如需詳細資訊，請參閱下文。</span><span class="sxs-lookup"><span data-stu-id="67b3e-263">More information on this is provided below.</span></span>

### <a name="expressroute"></a><span data-ttu-id="67b3e-264">ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="67b3e-264">ExpressRoute</span></span>

<span data-ttu-id="67b3e-265">ExpressRoute 能透過連線合作夥伴 (目前網際網路服務提供者 (ISP?WT.mc_id=gridbanksg-docs-dastarr)) 促成的私人連線，將內部部署或資料中心網路與 Azure 相連。</span><span class="sxs-lookup"><span data-stu-id="67b3e-265">ExpressRoute ties your on-premises or datacenter network to Azure through a private connection facilitated by a connectivity partner, such as your current Internet Service Provider (ISP?WT.mc_id=gridbanksg-docs-dastarr).</span></span> <span data-ttu-id="67b3e-266">這個做法能讓兩個網路彼此視為相同的網路執行個體，實現網路之間的無縫存取。</span><span class="sxs-lookup"><span data-stu-id="67b3e-266">This enables both networks to see each other as the same network instance, providing seamless access between networks.</span></span> <span data-ttu-id="67b3e-267">如果想要整合現有的內部部署系統與 Azure 網路，網路整合必不可少，而 ExpressRoute 提供最快的連線速度。</span><span class="sxs-lookup"><span data-stu-id="67b3e-267">Network integration is critical when you want to integrate existing on-premises systems with an Azure network, and ExpressRoute offers the fastest connection speeds possible.</span></span>

<span data-ttu-id="67b3e-268">如需 Azure ExpressRoute 的定價資訊，請[參閱這個頁面](https://azure.microsoft.com/pricing/details/expressroute/?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="67b3e-268">Additional pricing information for Azure ExpressRoute [can be found here](https://azure.microsoft.com/pricing/details/expressroute/?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

### <a name="vpn-gateway"></a><span data-ttu-id="67b3e-269">VPN 閘道</span><span class="sxs-lookup"><span data-stu-id="67b3e-269">VPN Gateway</span></span>

<span data-ttu-id="67b3e-270">VPN 閘道將是將您的網路與 Azure 相連的另一種方法。</span><span class="sxs-lookup"><span data-stu-id="67b3e-270">A VPN Gateway is another way to connect your network to Azure.</span></span> <span data-ttu-id="67b3e-271">這個模型的缺點是流量會經由網際網路來傳送，</span><span class="sxs-lookup"><span data-stu-id="67b3e-271">The downside of this model is traffic flows over the Internet.</span></span> <span data-ttu-id="67b3e-272">如此會導致連線較不具有彈性，而且網路速度也不及 ExpressRoute。不過這不會對風險網格運算案例造成任何阻礙，因為資料檔案的讀取通常不會花費太多時間。</span><span class="sxs-lookup"><span data-stu-id="67b3e-272">The connection can less resilient as a result and network speeds cannot reach those of ExpressRoute, however this may not be a barrier for a risk grid computing scenario as reading data files is typically a fast operation.</span></span>

<span data-ttu-id="67b3e-273">如需 VPN 閘道的定價資訊，請[參閱這個頁面](https://azure.microsoft.com/pricing/details/expressroute/?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="67b3e-273">Additional pricing information for VPN Gateway [can be found here](https://azure.microsoft.com/pricing/details/expressroute/?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

### <a name="choices-for-connectivity-details"></a><span data-ttu-id="67b3e-274">連線選擇詳細資料</span><span class="sxs-lookup"><span data-stu-id="67b3e-274">Choices for connectivity details</span></span>

<span data-ttu-id="67b3e-275">基本上，若要將您的網路延伸到 Azure，可以採用如圖 5 所示的兩種模式。</span><span class="sxs-lookup"><span data-stu-id="67b3e-275">There are essentially two models for extending your network to Azure as shown in Figure 5.</span></span>

1. <span data-ttu-id="67b3e-276">虛擬閘道：站對站</span><span class="sxs-lookup"><span data-stu-id="67b3e-276">Virtual Gateway – Site-to-Site</span></span>
2. <span data-ttu-id="67b3e-277">ExpressRoute：Exchange 或 ISP 提供者</span><span class="sxs-lookup"><span data-stu-id="67b3e-277">ExpressRoute – Exchange or ISP provider</span></span>

![站對站與 ExpressRoute](./assets/risk-grid-compute-assets/10-s2s-expressroute.png)

<span data-ttu-id="67b3e-279">**圖 5：** 站對站與 ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="67b3e-279">**Figure 5:** Site-to-Site and ExpressRoute</span></span>

#### <a name="virtual-gateway-site-to-site-integration"></a><span data-ttu-id="67b3e-280">虛擬閘道站對站整合</span><span class="sxs-lookup"><span data-stu-id="67b3e-280">Virtual Gateway Site-to-Site integration</span></span>

<span data-ttu-id="67b3e-281">[站對站 VPN 閘道](/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal?WT.mc_id=gridbanksg-docs-dastarr)能將您的內部部署網路與 Azure VNet 連接。</span><span class="sxs-lookup"><span data-stu-id="67b3e-281">A [Site-to-Site VPN Gateway](/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal?WT.mc_id=gridbanksg-docs-dastarr) connects your on-premises network to an Azure VNet.</span></span> <span data-ttu-id="67b3e-282">這個做法能橋接網路之間的隔閡，在本質上讓雙方成為同一個網路的一部分，允許雙向存取資源、伺服器和成品。</span><span class="sxs-lookup"><span data-stu-id="67b3e-282">This bridges the gap between networks essentially making them parts of the same network, with two-way access to resources, servers, and artifacts.</span></span> <span data-ttu-id="67b3e-283">至於執行風險網格運算批次作業的 Azure 背景工作角色 VM，您可以直接存取其中的資料檔案。</span><span class="sxs-lookup"><span data-stu-id="67b3e-283">This allows direct access to data files from the Azure worker VMs running the risk grid computing batch job.</span></span>

#### <a name="expressroute-integration"></a><span data-ttu-id="67b3e-284">ExpressRoute 整合</span><span class="sxs-lookup"><span data-stu-id="67b3e-284">ExpressRoute integration</span></span>

<span data-ttu-id="67b3e-285">由 Azure 合作夥伴網路提供者促成的 ExpressRoute 連線不僅能帶來與站對站連線相同的優點，還提供更優異的速度和可靠性。</span><span class="sxs-lookup"><span data-stu-id="67b3e-285">An ExpressRoute connection facilitated by an Azure partner network provider realizes the same benefits as a Site-to-Site connection, but with higher speeds and reliability.</span></span>

<span data-ttu-id="67b3e-286">取得 [ExpressRoute 連線模型] (/azure/expressroute/expressroute-connectivity-models?WT.mc_id=gridbanksg-docs-dastarr) 的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="67b3e-286">Get more information about [ExpressRoute connectivity models] (/azure/expressroute/expressroute-connectivity-models?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

### <a name="batch-processing-without-an-azure-hybrid-network"></a><span data-ttu-id="67b3e-287">不使用 Azure 混合式網路的 Batch 處理</span><span class="sxs-lookup"><span data-stu-id="67b3e-287">Batch processing without an Azure hybrid network</span></span>

<span data-ttu-id="67b3e-288">另一種 Batch 案例是將所有資料檔案上傳到 Azure 儲存體，之後再使用以 Azure 為基礎的計算電腦加以處理。</span><span class="sxs-lookup"><span data-stu-id="67b3e-288">Another Batch scenario is uploading all data files into Azure storage for later processing by Azure-based compute machines.</span></span> <span data-ttu-id="67b3e-289">檔案儲存體和 Blob 儲存體是存放風險網格運算資料的可行選擇。</span><span class="sxs-lookup"><span data-stu-id="67b3e-289">File storage and Blob storage are likely candidates for storing risk grid computing data.</span></span>

<span data-ttu-id="67b3e-290">在此案例中，作業控制器與所有計算節點都存留在 Azure 中，如圖 6 所示。</span><span class="sxs-lookup"><span data-stu-id="67b3e-290">In this scenario, the job controller and all compute nodes live in Azure as shown in Figure 6.</span></span> <span data-ttu-id="67b3e-291">處理後的資料可以存放在 Azure 資料存放區，準備供 Azure Machine Learning 解決方案或其他系統進行後續處理。</span><span class="sxs-lookup"><span data-stu-id="67b3e-291">The likely destination for processed data is an Azure data store, in preparation for further processing by Azure Machine Learning solutions or other systems.</span></span> <span data-ttu-id="67b3e-292">額外處理工作不在本文章的討論範圍內。</span><span class="sxs-lookup"><span data-stu-id="67b3e-292">This additional processing is beyond the scope of this article.</span></span>

![站對站與 ExpressRoute](./assets/risk-grid-compute-assets/09-batch-upload-process.png)

<span data-ttu-id="67b3e-294">**圖 6：** Batch 上傳到執行生命週期</span><span class="sxs-lookup"><span data-stu-id="67b3e-294">**Figure 6:** Batch upload to execution lifecycle</span></span>

### <a name="hybrid-network-connectivity-resources"></a><span data-ttu-id="67b3e-295">混合式網路連線資源</span><span class="sxs-lookup"><span data-stu-id="67b3e-295">Hybrid network connectivity resources</span></span>

<span data-ttu-id="67b3e-296">對您的情況而言，可能有好幾種合適的設定。</span><span class="sxs-lookup"><span data-stu-id="67b3e-296">Several configurations may be applicable in your situation.</span></span> <span data-ttu-id="67b3e-297">為了協助您擬定有關 Azure 網路連線的決策及提供架構指引，請參閱由模式與做法小組所撰寫的 _[將內部部署網路連線到 Azure](/azure/architecture/reference-architectures/hybrid-networking/?WT.mc_id=gridbanksg-docs-dastarr)_ 一文。</span><span class="sxs-lookup"><span data-stu-id="67b3e-297">To help with decisions and architectural guidance regarding connecting network connectivity to Azure, see the article _[Connect an on-premises network to Azure](/azure/architecture/reference-architectures/hybrid-networking/?WT.mc_id=gridbanksg-docs-dastarr)_ by the patterns & practices group.</span></span>

- <span data-ttu-id="67b3e-298">如需 VPN 閘道設定的替代方案，[請參閱這篇文章](/azure/vpn-gateway/vpn-gateway-about-vpngateways?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="67b3e-298">[See this article](/azure/vpn-gateway/vpn-gateway-about-vpngateways?WT.mc_id=gridbanksg-docs-dastarr) for VPN Gateway configuration alternatives.</span></span>
- <span data-ttu-id="67b3e-299">深入了解 [ExpressRoute 連線模型](/azure/expressroute/expressroute-connectivity-models?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="67b3e-299">Learn about [ExpressRoute connectivity models](/azure/expressroute/expressroute-connectivity-models?WT.mc_id=gridbanksg-docs-dastarr).</span></span>
- <span data-ttu-id="67b3e-300">計算 [ExpressRoute 價格](https://azure.microsoft.com/pricing/details/expressroute/?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="67b3e-300">Calculate [ExpressRoute pricing](https://azure.microsoft.com/pricing/details/expressroute/?WT.mc_id=gridbanksg-docs-dastarr).</span></span>
- <span data-ttu-id="67b3e-301">計算 [VPN 閘道價格](https://azure.microsoft.com/pricing/details/vpn-gateway/?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="67b3e-301">Calculate [VPN Gateway pricing](https://azure.microsoft.com/pricing/details/vpn-gateway/?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

## <a name="security-considerations"></a><span data-ttu-id="67b3e-302">安全性考量</span><span class="sxs-lookup"><span data-stu-id="67b3e-302">Security considerations</span></span>

<span data-ttu-id="67b3e-303">您可以建立 Azure [虛擬網路 (VNet)](/azure/virtual-network/virtual-networks-overview?WT.mc_id=gridbanksg-docs-dastarr)，並在虛擬網路中建立集區的計算節點。</span><span class="sxs-lookup"><span data-stu-id="67b3e-303">An Azure [virtual network (VNet)](/azure/virtual-network/virtual-networks-overview?WT.mc_id=gridbanksg-docs-dastarr) may be created and the pool's compute nodes created within it.</span></span> <span data-ttu-id="67b3e-304">這個方法能為 Batch 執行提供額外的隔離措施，同時允許使用 [Azure Active Directory (AAD)](/azure/active-directory/active-directory-whatis?WT.mc_id=gridbanksg-docs-dastarr) 驗證。</span><span class="sxs-lookup"><span data-stu-id="67b3e-304">This provides an extra level of isolation for the Batch runs and allows authentication using [Azure Active Directory (AAD)](/azure/active-directory/active-directory-whatis?WT.mc_id=gridbanksg-docs-dastarr).</span></span> <span data-ttu-id="67b3e-305">如需詳細資訊，請參閱[集區網路組態](/azure/batch/batch-api-basics#pool-network-configuration?WT.mc_id=gridbanksg-docs-dastarr)一節。</span><span class="sxs-lookup"><span data-stu-id="67b3e-305">See [Pool network configuration](/azure/batch/batch-api-basics#pool-network-configuration?WT.mc_id=gridbanksg-docs-dastarr) for more information.</span></span>

<span data-ttu-id="67b3e-306">使用 AAD 驗證 Batch 應用程式的方法有兩種：</span><span class="sxs-lookup"><span data-stu-id="67b3e-306">There are two ways to authenticate a Batch application using AAD:</span></span>

1. <span data-ttu-id="67b3e-307">**整合式驗證**。</span><span class="sxs-lookup"><span data-stu-id="67b3e-307">**Integrated authentication**.</span></span> <span data-ttu-id="67b3e-308">使用 AAD 帳戶的批次應用程式，可以使用帳戶來取得資料存放區的資源和其他資源。</span><span class="sxs-lookup"><span data-stu-id="67b3e-308">A batch application using AAD accounts can use the account to gain resources to data stores and other resources.</span></span>

2. <span data-ttu-id="67b3e-309">**服務主體**。</span><span class="sxs-lookup"><span data-stu-id="67b3e-309">**Service principal**.</span></span> <span data-ttu-id="67b3e-310">AAD 服務主體能定義使用者和應用程式的存取原則與使用權限。</span><span class="sxs-lookup"><span data-stu-id="67b3e-310">AAD Service principals define access policy and permissions for users and applications.</span></span> <span data-ttu-id="67b3e-311">服務主體能使用與該應用程式相關聯的祕密金鑰來提供使用者驗證。</span><span class="sxs-lookup"><span data-stu-id="67b3e-311">A service principal provides authentication to users using a secret key tied to that application.</span></span> <span data-ttu-id="67b3e-312">這個方法可允許使用祕密金鑰驗證自動執行的應用程式。</span><span class="sxs-lookup"><span data-stu-id="67b3e-312">This allows authenticating an unattended application with a secret key.</span></span> <span data-ttu-id="67b3e-313">服務主體能定義應用程式的原則和使用權限，以便在執行階段存取資源時代表應用程式。</span><span class="sxs-lookup"><span data-stu-id="67b3e-313">A service principal defines the policy and permissions for an application to represent the application when accessing resources at runtime.</span></span> <span data-ttu-id="67b3e-314">[在此深入了解](/azure/active-directory/develop/active-directory-application-objects?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="67b3e-314">[Learn more here](/azure/active-directory/develop/active-directory-application-objects?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

<span data-ttu-id="67b3e-315">若要深入了解與 AAD 相關的批次處理安全性，[請參閱這篇文章](/azure/batch/batch-aad-auth?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="67b3e-315">For more information on security in batch processing with AAD, [see this article](/azure/batch/batch-aad-auth?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

<span data-ttu-id="67b3e-316">Batch 服務也可以使用共用金鑰來進行驗證。</span><span class="sxs-lookup"><span data-stu-id="67b3e-316">The Batch service can also authenticate with a shared key.</span></span> <span data-ttu-id="67b3e-317">根據驗證服務的規定，您必須將兩個標頭值加入 HTTP 要求、資料和授權。</span><span class="sxs-lookup"><span data-stu-id="67b3e-317">The authentication service requires two header values to be added to the HTTP request, data and authorization.</span></span> <span data-ttu-id="67b3e-318">如需共用金鑰驗證的詳細資訊，[請參閱這個頁面](/rest/api/batchservice/authenticate-requests-to-the-azure-batch-service?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="67b3e-318">[See here for more](/rest/api/batchservice/authenticate-requests-to-the-azure-batch-service?WT.mc_id=gridbanksg-docs-dastarr) on shared key authentication.</span></span>

## <a name="cost-considerations"></a><span data-ttu-id="67b3e-319">成本考量</span><span class="sxs-lookup"><span data-stu-id="67b3e-319">Cost considerations</span></span>

<span data-ttu-id="67b3e-320">使用 Azure Batch 完全免費。</span><span class="sxs-lookup"><span data-stu-id="67b3e-320">There is no charge for using Azure Batch.</span></span> <span data-ttu-id="67b3e-321">您只需要針對取用的基礎資源付費，例如虛擬機器運作時間、儲存體和網路。</span><span class="sxs-lookup"><span data-stu-id="67b3e-321">You only pay for the underlying resources consumed, such as virtual machine uptime, storage, and networking.</span></span> <span data-ttu-id="67b3e-322">然而，計算節點 VM 即使閒置也必須付費，因此若不再需要，建議您取消佈建。</span><span class="sxs-lookup"><span data-stu-id="67b3e-322">However, the compute node VMs still cost money when sitting idle, so it is a good idea to deprovision machines when they are no longer needed.</span></span> <span data-ttu-id="67b3e-323">刪除包含 VM 的集區是相當常用的方法。</span><span class="sxs-lookup"><span data-stu-id="67b3e-323">This is often done by deleting the pool containing them.</span></span>
>
<span data-ttu-id="67b3e-324">建立集區時，您可以指定您想要的計算節點類型及每個類型的數目。</span><span class="sxs-lookup"><span data-stu-id="67b3e-324">When creating a pool, you can specify which types of compute nodes you want and the number of each.</span></span> <span data-ttu-id="67b3e-325">計算節點有以下兩種類型︰</span><span class="sxs-lookup"><span data-stu-id="67b3e-325">The two types of compute nodes are as follows:</span></span>
>
><span data-ttu-id="67b3e-326">**專用計算節點**會保留給您的工作負載使用。</span><span class="sxs-lookup"><span data-stu-id="67b3e-326">**Dedicated compute nodes** are reserved for your workloads.</span></span> <span data-ttu-id="67b3e-327">它們比低優先順序的節點昂貴，但保證永遠不會遭到佔用。</span><span class="sxs-lookup"><span data-stu-id="67b3e-327">They are more expensive than low-priority nodes, but they are guaranteed to never be preempted.</span></span>
>
><span data-ttu-id="67b3e-328">**低優先順序計算節點**會利用 Azure 中剩餘的容量來執行 Batch 工作負載。</span><span class="sxs-lookup"><span data-stu-id="67b3e-328">**Low-priority compute nodes** take advantage of surplus capacity in Azure to run Batch workloads.</span></span> <span data-ttu-id="67b3e-329">低優先順序的節點每小時比專用節點更便宜，並可啟用需要大量計算能力的工作負載。</span><span class="sxs-lookup"><span data-stu-id="67b3e-329">Low-priority nodes are less expensive per hour than dedicated nodes, and enable workloads requiring a lot of compute power.</span></span> <span data-ttu-id="67b3e-330">如需詳細資訊，請參閱[使用低優先順序的 VM 搭配 Batch](/azure/batch/batch-low-pri-vms?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="67b3e-330">For more information, see [Use low-priority VMs with Batch](/azure/batch/batch-low-pri-vms?WT.mc_id=gridbanksg-docs-dastarr).</span></span>
>
><span data-ttu-id="67b3e-331">專用和低優先順序節點可以共存在同一個集區。</span><span class="sxs-lookup"><span data-stu-id="67b3e-331">Dedicated and low-priority nodes may exist in the same pool.</span></span>
>
><span data-ttu-id="67b3e-332">如需低優先順序和專用計算節點的價格資訊，請參閱 [Batch 價格](https://azure.microsoft.com/pricing/details/batch/?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="67b3e-332">For pricing information for both low-priority and dedicated compute nodes, see [Batch Pricing](https://azure.microsoft.com/pricing/details/batch/?WT.mc_id=gridbanksg-docs-dastarr).</span></span>

<span data-ttu-id="67b3e-333">使用 Batch 診斷記錄服務時，發送到 Azure 儲存體的資料會產生費用。</span><span class="sxs-lookup"><span data-stu-id="67b3e-333">When using the Batch Diagnostic Logging service, the data emitted to Azure storage incurs a cost.</span></span> <span data-ttu-id="67b3e-334">這是儲存體資料，就像其他所有資料一樣，而且價格會受到保留的診斷資料數量影響。</span><span class="sxs-lookup"><span data-stu-id="67b3e-334">This is storage data like any other data, and pricing is impacted by the amount of diagnostic data retained.</span></span>

## <a name="getting-started"></a><span data-ttu-id="67b3e-335">開始使用</span><span class="sxs-lookup"><span data-stu-id="67b3e-335">Getting started</span></span>

<span data-ttu-id="67b3e-336">複雜如 Batch 風險網格運算這樣的領域，若想要深入了解，有許多切入點，以下是幾個協助您進一步了解 Batch 技術的合理起點。</span><span class="sxs-lookup"><span data-stu-id="67b3e-336">While there are many places to get started with a complex domain like Batch computing for risk grid computing, here are some logical starting points to better understand the Batch technology.</span></span>

<span data-ttu-id="67b3e-337">使用程式碼和 Azure 入口網站範例是開始使用 Batch 的[好方法](/azure/batch/?WT.mc_id=gridbanksg-docs-dastarr)。</span><span class="sxs-lookup"><span data-stu-id="67b3e-337">[This is a great place to start](/azure/batch/?WT.mc_id=gridbanksg-docs-dastarr) working with Batch using coding and Azure portal examples.</span></span> <span data-ttu-id="67b3e-338">[GitHub](https://github.com/Azure/azure-batch-samples) 另有免費使用的 Azure Batch 範例應用程式。</span><span class="sxs-lookup"><span data-stu-id="67b3e-338">The Azure Batch sample applications are also freely available [on GitHub](https://github.com/Azure/azure-batch-samples).</span></span>

<span data-ttu-id="67b3e-339">以下是一些簡短的教學課程，協助您建置簡單的應用程式來建立和執行批次計算作業。</span><span class="sxs-lookup"><span data-stu-id="67b3e-339">Below are some quick tutorials to help you build a simple application to create and run batch compute jobs.</span></span> <span data-ttu-id="67b3e-340">建置應用程式的選項如下：</span><span class="sxs-lookup"><span data-stu-id="67b3e-340">Options for building the application are as follows:</span></span>

- [<span data-ttu-id="67b3e-341">Batch .NET API</span><span class="sxs-lookup"><span data-stu-id="67b3e-341">Batch .NET API</span></span>](/azure/batch/batch-dotnet-get-started?WT.mc_id=gridbanksg-docs-dastarr)
- [<span data-ttu-id="67b3e-342">Batch SDK for Python</span><span class="sxs-lookup"><span data-stu-id="67b3e-342">Batch SDK for Python</span></span>](/azure/batch/batch-python-tutorial?WT.mc_id=gridbanksg-docs-dastarr)
- [<span data-ttu-id="67b3e-343">Batch SDK for Node.js</span><span class="sxs-lookup"><span data-stu-id="67b3e-343">Batch SDK for Node.js</span></span>](/azure/batch/batch-nodejs-get-started?WT.mc_id=gridbanksg-docs-dastarr)
- [<span data-ttu-id="67b3e-344">使用 PowerShell 管理 Batch</span><span class="sxs-lookup"><span data-stu-id="67b3e-344">Batch management with PowerShell</span></span>](/azure/batch/batch-powershell-cmdlets-get-started?WT.mc_id=gridbanksg-docs-dastarr)
- [<span data-ttu-id="67b3e-345">使用 Azure CLI 管理 Batch</span><span class="sxs-lookup"><span data-stu-id="67b3e-345">Batch management with the Azure CLI</span></span>](/azure/batch/batch-cli-get-started?WT.mc_id=gridbanksg-docs-dastarr)

<span data-ttu-id="67b3e-346">請考慮啟動概念證明計劃。</span><span class="sxs-lookup"><span data-stu-id="67b3e-346">Consider launching a proof-of-concept initiative.</span></span> <span data-ttu-id="67b3e-347">要使用什麼方法將資料內嵌到 Azure？</span><span class="sxs-lookup"><span data-stu-id="67b3e-347">What will your approach be for data ingestion into Azure?</span></span> <span data-ttu-id="67b3e-348">要使用混合式網路，還是透過 SDK 或 REST 介面上傳資料？</span><span class="sxs-lookup"><span data-stu-id="67b3e-348">Will you use a hybrid network or upload data via an SDK or REST interface?</span></span> <span data-ttu-id="67b3e-349">如果有意使用混合式網路，請考慮進行試驗將網路準備妥當。</span><span class="sxs-lookup"><span data-stu-id="67b3e-349">If you are considering a bybrid network, consider launching a pilot to put this in place.</span></span>

<span data-ttu-id="67b3e-350">評估 Batch 計算作業的大小，然後選取合適的調整解決方案。</span><span class="sxs-lookup"><span data-stu-id="67b3e-350">Evaluate the size of your Batch compute jobs and select the right scaling solution.</span></span> <span data-ttu-id="67b3e-351">[自動調整公式](/azure/batch/batch-automatic-scaling?WT.mc_id=gridbanksg-docs-dastarr)能進行複雜的排程案例，而且能使用 Azure 入口網站實現較簡單的案例。</span><span class="sxs-lookup"><span data-stu-id="67b3e-351">[Autoscaling formulas](/azure/batch/batch-automatic-scaling?WT.mc_id=gridbanksg-docs-dastarr) enable complex scheduling scenarios while simpler scenarios are achivable by using the Azure portal.</span></span>

## <a name="technologies-presented"></a><span data-ttu-id="67b3e-352">使用的技術</span><span class="sxs-lookup"><span data-stu-id="67b3e-352">Technologies presented</span></span>

<span data-ttu-id="67b3e-353">[Azure Batch](/azure/batch/?WT.mc_id=gridbanksg-docs-dastarr) 提供在雲端執行大規模平行處理作業的能力。</span><span class="sxs-lookup"><span data-stu-id="67b3e-353">[Azure Batch](/azure/batch/?WT.mc_id=gridbanksg-docs-dastarr) provides capabilities to run large scale parallel processing jobs in the cloud.</span></span>

<span data-ttu-id="67b3e-354">[Azure Active Directory](/azure/active-directory/active-directory-whatis?WT.mc_id=gridbanksg-docs-dastarr) 是多租用戶雲端式目錄，也是身分識別管理服務，將核心目錄服務、應用程式存取管理、身分識別保護結合在單一解決方案中。</span><span class="sxs-lookup"><span data-stu-id="67b3e-354">[Azure Active Directory](/azure/active-directory/active-directory-whatis?WT.mc_id=gridbanksg-docs-dastarr) is a multi-tenant, cloud-based directory, and identity management service combining core directory services, application access management, and identity protection into a single solution.</span></span>

<span data-ttu-id="67b3e-355">[自動調整公式](/azure/batch/batch-automatic-scaling?WT.mc_id=gridbanksg-docs-dastarr)是上傳到 Batch 處理排程器的指令碼，能精密控制 Batch 的調整行為。</span><span class="sxs-lookup"><span data-stu-id="67b3e-355">[Automatic scaling formulas](/azure/batch/batch-automatic-scaling?WT.mc_id=gridbanksg-docs-dastarr) are scripts uploaded to the batch processing scheduler for fine grained control of Batch scaling behaviors.</span></span>

<span data-ttu-id="67b3e-356">[Batch 診斷記錄](/azure/batch/batch-diagnostics?WT.mc_id=gridbanksg-docs-dastarr)是 Azure Batch 的功能，能從 Batch 執行和產生的事件當中建立詳細記錄。</span><span class="sxs-lookup"><span data-stu-id="67b3e-356">[Batch Diagnostics Logging](/azure/batch/batch-diagnostics?WT.mc_id=gridbanksg-docs-dastarr) is a feature of Azure Batch enabling creation of a detailed log from your Batch runs and the events generated.</span></span> <span data-ttu-id="67b3e-357">記錄會儲存在 Azure 儲存體。</span><span class="sxs-lookup"><span data-stu-id="67b3e-357">Logs are stored in Azure Storage.</span></span>

<span data-ttu-id="67b3e-358">[BatchLabs](https://github.com/Azure/BatchLabs) 是一款適用於 Windows、MacOS 和 Linux 的獨立應用程式，能用來監視及管理 Batch。</span><span class="sxs-lookup"><span data-stu-id="67b3e-358">[BatchLabs](https://github.com/Azure/BatchLabs) is a standalone application for Batch monitoring and management available Windows, MacOS and Linux.</span></span>

<span data-ttu-id="67b3e-359">[ExpressRoute](/azure/expressroute/expressroute-introduction?WT.mc_id=gridbanksg-docs-dastarr) 是快速而可靠的混合式網路解決方案，能將內部部署網路與 Azure 網路連接在一起。</span><span class="sxs-lookup"><span data-stu-id="67b3e-359">[ExpressRoute](/azure/expressroute/expressroute-introduction?WT.mc_id=gridbanksg-docs-dastarr) is a high speed and reliability hybrid network solution for joining on-premises and Azure networks.</span></span>

<span data-ttu-id="67b3e-360">[VPN 閘道](/azure/vpn-gateway/?WT.mc_id=gridbanksg-docs-dastarr)是一款混合式網路解決方案，能使用網際網路將內部部署網路與 Azure 網路連接在一起。</span><span class="sxs-lookup"><span data-stu-id="67b3e-360">[VPN Gateway](/azure/vpn-gateway/?WT.mc_id=gridbanksg-docs-dastarr) is a hybrid network solution using the Internet for joining on-premises and Azure networks.</span></span>

## <a name="conclusion"></a><span data-ttu-id="67b3e-361">結論</span><span class="sxs-lookup"><span data-stu-id="67b3e-361">Conclusion</span></span>

<span data-ttu-id="67b3e-362">本文件概述銀行業使用 Azure Batch 進行風險網格運算時的技術解決方案與考量。</span><span class="sxs-lookup"><span data-stu-id="67b3e-362">This document provided an overview of technical solutions and considerations when using Azure Batch for risk grid computing for banking.</span></span> <span data-ttu-id="67b3e-363">本文涉及的主題甚廣，包括 Azure Batch 的定義或[網路選項](/azure/architecture/reference-architectures/hybrid-networking/?WT.mc_id=gridbanksg-docs-dastarr)，甚至成本考量都涵蓋在內。</span><span class="sxs-lookup"><span data-stu-id="67b3e-363">The article covered a lot of ground from the definition of Azure Batch to [networking options](/azure/architecture/reference-architectures/hybrid-networking/?WT.mc_id=gridbanksg-docs-dastarr), and even cost considerations.</span></span>

<span data-ttu-id="67b3e-364">如果您在考慮進一步評估以 Azure Batch 進行風險網格運算，[本頁面](/azure/batch/?WT.mc_id=gridbanksg-docs-dastarr)是入門的實用資源。</span><span class="sxs-lookup"><span data-stu-id="67b3e-364">When considering moving forward in evaluating Azure Batch for risk grid computing, [this page](/azure/batch/?WT.mc_id=gridbanksg-docs-dastarr) is a good resource for getting started.</span></span> <span data-ttu-id="67b3e-365">其透過範例引導式的教學課程解說平行檔案處理，也就是風險網格運算固有的特色。</span><span class="sxs-lookup"><span data-stu-id="67b3e-365">It provides sample guided tutorials for parallel file processing, which is inherent in risk grid computing.</span></span> <span data-ttu-id="67b3e-366">提供的教學課程使用 Azure 入口網站、Azure CLI、NET 和 Python。</span><span class="sxs-lookup"><span data-stu-id="67b3e-366">Tutorials are provided using the Azure Portal, Azure CLI, .NET and Python.</span></span>
