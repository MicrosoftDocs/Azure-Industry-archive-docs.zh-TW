---
title: 精算風險分析與模型化解決方案指南
author: scseely
ms.author: scseely
ms.date: 08/23/2018
ms.topic: article
ms.service: industry
description: 此解決方案指南說明精算開發人員如何將其現有的解決方案加上支援的基礎結構移至 Azure。
ms.openlocfilehash: 82cb53d529f6d7524ae1f9c148118b5edddc648b
ms.sourcegitcommit: 76f2862adbec59311b5888e043a120f89dc862af
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/03/2018
ms.locfileid: "51654285"
---
# <a name="actuarial-risk-analysis-and-financial-modeling-solution-guide"></a><span data-ttu-id="6793f-103">精算風險分析與財務模型化解決方案指南</span><span class="sxs-lookup"><span data-stu-id="6793f-103">Actuarial risk analysis and financial modeling solution guide</span></span>

<span data-ttu-id="6793f-104">過去幾年中，提供保險類產品的保險公司和公司已經看到一些新法規到位。</span><span class="sxs-lookup"><span data-stu-id="6793f-104">Over the last several years, insurers and companies that provide insurance-like products have seen several new regulations come into place.</span></span> <span data-ttu-id="6793f-105">這些新法規要求對保險公司進行更廣泛的財務模型化。</span><span class="sxs-lookup"><span data-stu-id="6793f-105">These new regulations have required more extensive financial modeling for insurers.</span></span> <span data-ttu-id="6793f-106">歐盟頒佈了[償付能力 II](https://eur-lex.europa.eu/legal-content/EN/ALL/?uri=celex%3A32009L0138)，要求保險公司證明已完成適當分析，以驗證保險公司可在年底具備償付能力。</span><span class="sxs-lookup"><span data-stu-id="6793f-106">The European Union enacted [Solvency II](https://eur-lex.europa.eu/legal-content/EN/ALL/?uri=celex%3A32009L0138) which requires insurers to demonstrate that they have done proper analysis to validate that the insurer will be solvent at the end of the year.</span></span> <span data-ttu-id="6793f-107">提供可變年金的保險公司必須遵循[精算指導方針 XLIII](https://eur-lex.europa.eu/legal-content/EN/ALL/?uri=celex%3A32009L0138)，並廣泛分析資產與負債現金流量。</span><span class="sxs-lookup"><span data-stu-id="6793f-107">Insurers who provide variable annuities have to follow [Actuarial Guideline XLIII](https://eur-lex.europa.eu/legal-content/EN/ALL/?uri=celex%3A32009L0138) with extensive analysis of asset and liability cash flows.</span></span> <span data-ttu-id="6793f-108">所有類型的保險公司，包括散發保險類產品的保險公司，都必須在 2021 年前實施[國際財務報告準則 17](https://www.ifrs.org/supporting-implementation/supporting-materials-by-ifrs-standard/ifrs-17/)(IFRS 17)。</span><span class="sxs-lookup"><span data-stu-id="6793f-108">All types of insurers, including those who distribute insurance like products, will have to implement [International Financial Reporting Standard 17](https://www.ifrs.org/supporting-implementation/supporting-materials-by-ifrs-standard/ifrs-17/) (IFRS 17) by 2021.</span></span> <span data-ttu-id="6793f-109">根據保險公司營運所在地的司法管轄區，存在其他法規。</span><span class="sxs-lookup"><span data-stu-id="6793f-109">Other regulations exist depending on the jurisdictions the insurers operate in.</span></span> <span data-ttu-id="6793f-110">這些標準和法規要求精算師在進行資產與負債模型化時使用計算密集型技術。</span><span class="sxs-lookup"><span data-stu-id="6793f-110">These standards and regulations require actuaries to use compute-intensive techniques when modeling assets and liabilities.</span></span> <span data-ttu-id="6793f-111">許多分析會利用隨機產生的情節資料，而不是資產和負債等的逐一輸入。</span><span class="sxs-lookup"><span data-stu-id="6793f-111">Much of the analysis will make use of stochastically generated scenario data over seriatim inputs of things like assets and liabilities.</span></span> <span data-ttu-id="6793f-112">除了法規需求之外，精算師還會進行大量的財務模型化和計算，以產生用來產生法規報告的模型輸入資料表。</span><span class="sxs-lookup"><span data-stu-id="6793f-112">Beyond regulatory needs, actuaries do a fair amount of financial modeling and computation to generate the input tables for the models that generate the regulatory reports.</span></span> <span data-ttu-id="6793f-113">內部網格不能滿足運算需求，因此精算師正穩定地移至雲端。</span><span class="sxs-lookup"><span data-stu-id="6793f-113">Internal grids do not satisfy the computational needs, so actuaries are steadily moving to the cloud.</span></span>

<span data-ttu-id="6793f-114">精算師移至雲端，以便有更多時間檢閱、評估及驗證結果。</span><span class="sxs-lookup"><span data-stu-id="6793f-114">Actuaries move to the cloud to get more time to review, evaluate, and validate results.</span></span> <span data-ttu-id="6793f-115">當管理機關對保險公司進行稽核時，精算師必須能夠說明其結果。</span><span class="sxs-lookup"><span data-stu-id="6793f-115">When regulators audit insurers, the actuaries need to be able to explain their results.</span></span> <span data-ttu-id="6793f-116">移至雲端可存取運算資源，透過平行處理的強大功能，在 24-120 小時的時鐘時間內執行 20000 小時的分析。</span><span class="sxs-lookup"><span data-stu-id="6793f-116">The move to the cloud gives access to the computing resources to run 20000 hours of analysis in 24-120 hours of clock time through the power of parallelization.</span></span> <span data-ttu-id="6793f-117">為了協助這項擴展需求，許多建立精算軟體的公司提供允許在 Azure 中執行計算的解決方案。</span><span class="sxs-lookup"><span data-stu-id="6793f-117">To assist with this need for scale, many of the companies that create actuarial software provide solutions that allow calculations to run in Azure.</span></span> <span data-ttu-id="6793f-118">這些解決方案中，有些是以執行內部部署和 Azure 的技術為基礎的，例如 [HPC Pack](https://docs.microsoft.com/powershell/high-performance-computing/overview?view=hpc16-ps&WT.mc_id=riskmodel-docs-scseely)。</span><span class="sxs-lookup"><span data-stu-id="6793f-118">Some of these solutions are built on technologies that run on premises and Azure like [HPC Pack](https://docs.microsoft.com/powershell/high-performance-computing/overview?view=hpc16-ps&WT.mc_id=riskmodel-docs-scseely).</span></span> <span data-ttu-id="6793f-119">其他解決方案是 Azure 原生的，並使用 [Azure Batch](https://docs.microsoft.com/azure/batch?WT.mc_id=riskmodel-docs-scseely)、[虛擬機器擴展集](https://docs.microsoft.com/azure/virtual-machine-scale-sets?WT.mc_id=riskmodel-docs-scseely)，或自訂的擴充解決方案。</span><span class="sxs-lookup"><span data-stu-id="6793f-119">Others are Azure native and use [Azure Batch](https://docs.microsoft.com/azure/batch?WT.mc_id=riskmodel-docs-scseely), [Virtual Machine Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets?WT.mc_id=riskmodel-docs-scseely), or a custom scaling solution.</span></span>

<span data-ttu-id="6793f-120">在本文中，我們將了解精算開發人員如何使用 Azure，結合模組化封裝，來分析風險。</span><span class="sxs-lookup"><span data-stu-id="6793f-120">In this article, we will look at how actuarial developers can use Azure, coupled with modeling packages, to analyze risk.</span></span> <span data-ttu-id="6793f-121">本文會說明模組化封裝用來在 Azure 上大規模執行的一些 Azure 技術。</span><span class="sxs-lookup"><span data-stu-id="6793f-121">The article explains some of the Azure technologies the modeling packages use to run at scale on Azure.</span></span> <span data-ttu-id="6793f-122">您可以使用相同技術進一步分析您的資料。</span><span class="sxs-lookup"><span data-stu-id="6793f-122">You can use the same technology to do further analysis of your data.</span></span> <span data-ttu-id="6793f-123">我們會查看以下項目：</span><span class="sxs-lookup"><span data-stu-id="6793f-123">We look at the following items:</span></span>

- <span data-ttu-id="6793f-124">在 Azure 中，以較少的時間執行較大的模型。</span><span class="sxs-lookup"><span data-stu-id="6793f-124">Running larger models in less time, in Azure.</span></span>
- <span data-ttu-id="6793f-125">報告結果。</span><span class="sxs-lookup"><span data-stu-id="6793f-125">Reporting on the results.</span></span>
- <span data-ttu-id="6793f-126">管理資料保留期。</span><span class="sxs-lookup"><span data-stu-id="6793f-126">Managing data retention.</span></span>

<span data-ttu-id="6793f-127">無論是為生命、財產和災害、健康或其他保險服務，您都必須建立資產和負債的財務與風險模型，以調整您的投資和保費，以便保持身為保險公司的償付能力。</span><span class="sxs-lookup"><span data-stu-id="6793f-127">Whether you are servicing life, property and casualty, health, or other insurance, you need to create financial and risk models of your assets and liabilities to adjust your investments and premiums so that you stay solvent as an insurer.</span></span> <span data-ttu-id="6793f-128">IFRS 17 報告對精算師建立的模型增加了變化，例如計算合約服務利潤 (CSM)，這改變了保險公司隨著時間管理其利潤的方式。</span><span class="sxs-lookup"><span data-stu-id="6793f-128">IFRS 17 reporting adds changes to the models the actuaries create, like calculating the contractual service margin (CSM), which change how insurers manage their profit through time.</span></span>

## <a name="running-more-in-less-time-in-azure"></a><span data-ttu-id="6793f-129">在 Azure 中，以較少的時間執行更多</span><span class="sxs-lookup"><span data-stu-id="6793f-129">Running more in less time, in Azure</span></span>

<span data-ttu-id="6793f-130">您相信雲端的承諾：它可以更快、更輕鬆地執行您的財務和風險模型。</span><span class="sxs-lookup"><span data-stu-id="6793f-130">You believe in the promise of the cloud: it can run your financial and risk models faster and easier.</span></span> <span data-ttu-id="6793f-131">對於許多保險公司而言，粗略計算顯示出一個問題：他們需要數年，甚至數十年的連續時間，從頭到尾執行這些計算。</span><span class="sxs-lookup"><span data-stu-id="6793f-131">For many insurers, a back of the envelope calculation shows the problem: they need years, or even decades, of sequential time to run these calculations from start to finish.</span></span> <span data-ttu-id="6793f-132">您需要可解決執行時間問題的技術。</span><span class="sxs-lookup"><span data-stu-id="6793f-132">You need technology to solve the runtime problem.</span></span> <span data-ttu-id="6793f-133">您的策略如下：</span><span class="sxs-lookup"><span data-stu-id="6793f-133">Your strategies are:</span></span>

- <span data-ttu-id="6793f-134">資料準備：有些資料的變化很慢。</span><span class="sxs-lookup"><span data-stu-id="6793f-134">Data preparation: Some data changes slowly.</span></span> <span data-ttu-id="6793f-135">政策或服務合約生效之後，索賠就會以可預測的速度進展。</span><span class="sxs-lookup"><span data-stu-id="6793f-135">Once a policy or service contract is in force, claims move at a predictable pace.</span></span> <span data-ttu-id="6793f-136">您可以備妥模型在抵達時執行所需的資料，就不需要針對資料清理和準備而規劃大量時間。</span><span class="sxs-lookup"><span data-stu-id="6793f-136">You can prepare the data needed for model runs as it arrives, eliminating a need to plan much time for data cleansing and preparation.</span></span> <span data-ttu-id="6793f-137">您也可以使用叢集，透過加權表示法建立連續數據的替代物。</span><span class="sxs-lookup"><span data-stu-id="6793f-137">You may also use clustering to create stand-ins for seriatim data through weighted representations.</span></span> <span data-ttu-id="6793f-138">較少的記錄通常會使計算時間縮短。</span><span class="sxs-lookup"><span data-stu-id="6793f-138">Fewer records usually results in reduced computation time.</span></span>
- <span data-ttu-id="6793f-139">平行處理：如果需要針對兩個或更多項目執行相同的分析，您可以同時執行分析。</span><span class="sxs-lookup"><span data-stu-id="6793f-139">Parallelization: If you need to do the same analysis to two or more items, you may be able to perform the analysis simultaneously.</span></span>

<span data-ttu-id="6793f-140">讓我們分別看看這些項目。</span><span class="sxs-lookup"><span data-stu-id="6793f-140">Let's look at these items individually.</span></span>

### <a name="data-preparation"></a><span data-ttu-id="6793f-141">資料準備</span><span class="sxs-lookup"><span data-stu-id="6793f-141">Data Preparation</span></span>

<span data-ttu-id="6793f-142">資料會從數個不同來源進入。</span><span class="sxs-lookup"><span data-stu-id="6793f-142">Data flows in from several different sources.</span></span> <span data-ttu-id="6793f-143">您的商業帳簿中有半結構化的政策資料。</span><span class="sxs-lookup"><span data-stu-id="6793f-143">You have semi-structured policy data in your books of business.</span></span> <span data-ttu-id="6793f-144">有關被保險人、公司和出現在各種申請表單中的項目的資訊。</span><span class="sxs-lookup"><span data-stu-id="6793f-144">Information about the insured people, companies, and the items which appear in various application forms.</span></span> <span data-ttu-id="6793f-145">經濟情境產生器 (ESG) 會以各種不同格式產生資料，這些格式可能需要轉譯成您的模型可使用的表單。</span><span class="sxs-lookup"><span data-stu-id="6793f-145">Economic Scenario Generators (ESGs) produce data in a variety of formats which may need translation to a form your model can use.</span></span> <span data-ttu-id="6793f-146">目前有關資產價值的資料也需要正規化。</span><span class="sxs-lookup"><span data-stu-id="6793f-146">Current data on values of assets also needs normalization.</span></span> <span data-ttu-id="6793f-147">從來源轉移到模型時，股票市場資料、租賃現金流量、抵押貸款的支付資訊，以及其他資產資料都需要做一些準備。</span><span class="sxs-lookup"><span data-stu-id="6793f-147">The stock market data, cash flow data on rentals, payment information on mortgages, and other asset data all need some preparation when moving from the source to the model.</span></span> <span data-ttu-id="6793f-148">最後，您應該根據最新的機厭資料更新任何假設。</span><span class="sxs-lookup"><span data-stu-id="6793f-148">Finally, you should update any assumptions based on recent experience data.</span></span> <span data-ttu-id="6793f-149">為了加速模型執行，請提前準備資料。</span><span class="sxs-lookup"><span data-stu-id="6793f-149">To speed up a model run, you prepare the data ahead of time.</span></span> <span data-ttu-id="6793f-150">執行階段發生時，您應執行任何必要更新以增加自上次排程更新後的變更。</span><span class="sxs-lookup"><span data-stu-id="6793f-150">When run time happens, you do any necessary updates to add in changes since the last scheduled update.j</span></span>

<span data-ttu-id="6793f-151">那麼，您該如何準備資料？</span><span class="sxs-lookup"><span data-stu-id="6793f-151">So, how do you prepare the data?</span></span> <span data-ttu-id="6793f-152">讓我們先看看通用位元，然後再看看如何處理資料出現的不同方式。</span><span class="sxs-lookup"><span data-stu-id="6793f-152">Let's first look at the common bits and then look at how to work with the different ways data will appear.</span></span> <span data-ttu-id="6793f-153">首先，您需要一個機制以獲得自上次同步處理之後的所有變更。</span><span class="sxs-lookup"><span data-stu-id="6793f-153">First, you want a mechanism to get all the changes since the last synchronization.</span></span> <span data-ttu-id="6793f-154">該機制應該包含可排序的值。</span><span class="sxs-lookup"><span data-stu-id="6793f-154">That mechanism should include a value which is sortable.</span></span> <span data-ttu-id="6793f-155">針對最近的變更，其值應大於任何先前的變更。</span><span class="sxs-lookup"><span data-stu-id="6793f-155">For recent changes, that value should be greater than any previous change.</span></span> <span data-ttu-id="6793f-156">最常見的兩個機制是不斷增加的 ID 欄位或時間戳記。</span><span class="sxs-lookup"><span data-stu-id="6793f-156">The two most common two mechanisms are an ever-increasing ID field or a timestamp.</span></span> <span data-ttu-id="6793f-157">如果記錄具有增加的 ID 金鑰，但記錄其餘部分包含可更新的欄位，則需要使用類似&quot;上次修改&quot;時間戳記以找出變更。</span><span class="sxs-lookup"><span data-stu-id="6793f-157">If a record has an increasing ID key but the rest of the record contains fields which can be updated, you need to use something like a &quot;last-modified&quot; timestamp to find changes.</span></span> <span data-ttu-id="6793f-158">處理完記錄之後，要記錄最後已更新項目的可排序值。</span><span class="sxs-lookup"><span data-stu-id="6793f-158">Once the records have been processed, record the sortable value of the last item updated.</span></span> <span data-ttu-id="6793f-159">此值 (可能是名為 _lastModified_ 的欄位上的時間戳記) 會變成您的浮水印，用於後續對資料存放區的查詢。</span><span class="sxs-lookup"><span data-stu-id="6793f-159">This value, probably a timestamp on a field called _lastModified_, becomes your watermark, used for subsequent queries on the data store.</span></span> <span data-ttu-id="6793f-160">資料變更可以用多種方式加以處理。</span><span class="sxs-lookup"><span data-stu-id="6793f-160">Data changes can be processed in many ways.</span></span> <span data-ttu-id="6793f-161">以下是兩個使用最少資源的常見機制：</span><span class="sxs-lookup"><span data-stu-id="6793f-161">Here are two common mechanisms which use minimal resources:</span></span>

1. <span data-ttu-id="6793f-162">如果您有數百或數千個變更要處理：將資料上傳至 blob 儲存體。</span><span class="sxs-lookup"><span data-stu-id="6793f-162">If you have hundreds or thousands of changes to process: Upload the data to blob storage.</span></span> <span data-ttu-id="6793f-163">使用 [Azure Data Factory](https://docs.microsoft.com/azure/data-factory?WT.mc_id=riskmodel-docs-scseely)中的事件觸發程序處理變更集。</span><span class="sxs-lookup"><span data-stu-id="6793f-163">Use an event trigger in [Azure Data Factory](https://docs.microsoft.com/azure/data-factory?WT.mc_id=riskmodel-docs-scseely) to process the changeset.</span></span>
2. <span data-ttu-id="6793f-164">如果您有少數變更要處理，或希望一有變更就立即更新資料，請將每個變更放進由[服務匯流排](https://docs.microsoft.com/azure/service-bus-messaging?WT.mc_id=riskmodel-docs-scseely)或[儲存體佇列](https://docs.microsoft.com/azure/storage/queues/storage-queues-introduction?WT.mc_id=riskmodel-docs-scseely)所裝載的佇列訊息。</span><span class="sxs-lookup"><span data-stu-id="6793f-164">If you have small sets of changes to process or want to update your data as soon as a change happens, put each change into a queue message hosted by [Service Bus](https://docs.microsoft.com/azure/service-bus-messaging?WT.mc_id=riskmodel-docs-scseely) or [Storage Queues](https://docs.microsoft.com/azure/storage/queues/storage-queues-introduction?WT.mc_id=riskmodel-docs-scseely).</span></span> <span data-ttu-id="6793f-165">[這篇文章](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-azure-and-service-bus-queues-compared-contrasted?WT.mc_id=riskmodel-docs-scseely)詳細說明兩種佇列技術之間的取捨。</span><span class="sxs-lookup"><span data-stu-id="6793f-165">[This article](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-azure-and-service-bus-queues-compared-contrasted?WT.mc_id=riskmodel-docs-scseely) has a great explanation about the tradeoffs between the two queueing technologies.</span></span> <span data-ttu-id="6793f-166">當訊息在佇列中時，您可以使用 Azure Functions 或 Azure Data Factory 中的觸發程序來處理訊息。</span><span class="sxs-lookup"><span data-stu-id="6793f-166">Once a message is in a queue, you can use a trigger in Azure Functions or Azure Data Factory to process the message.</span></span>

<span data-ttu-id="6793f-167">下圖說明典型案例。</span><span class="sxs-lookup"><span data-stu-id="6793f-167">The following figure illustrates a typical scenario.</span></span> <span data-ttu-id="6793f-168">首先，排程的工作會收集一些資料集，並將檔案放入儲存體。</span><span class="sxs-lookup"><span data-stu-id="6793f-168">First, a scheduled job collects some set of data and places the file into storage.</span></span> <span data-ttu-id="6793f-169">排程的工作可以是內部部署執行的 CRON 作業、[排程器工作](https://docs.microsoft.com/azure/scheduler?WT.mc_id=riskmodel-docs-scseely)[邏輯應用程式](https://docs.microsoft.com/azure/logic-apps/logic-apps-overview?WT.mc_id=riskmodel-docs-scseely)，或任何在計時器上執行的項目。</span><span class="sxs-lookup"><span data-stu-id="6793f-169">The scheduled job can be a CRON job running on premises, a [Scheduler task](https://docs.microsoft.com/azure/scheduler?WT.mc_id=riskmodel-docs-scseely), [Logic App](https://docs.microsoft.com/azure/logic-apps/logic-apps-overview?WT.mc_id=riskmodel-docs-scseely), or anything that runs on a timer.</span></span> <span data-ttu-id="6793f-170">上傳檔案之後，會觸發 [Azure Function](https://docs.microsoft.com/azure/azure-functions?WT.mc_id=riskmodel-docs-scseely) 或 **Data Factory** 執行個體以處理資料。</span><span class="sxs-lookup"><span data-stu-id="6793f-170">Once the file is uploaded, an [Azure Function](https://docs.microsoft.com/azure/azure-functions?WT.mc_id=riskmodel-docs-scseely) or **Data Factory** instance can be triggered to process the data.</span></span> <span data-ttu-id="6793f-171">如果是可在短時間內處理的檔案，請使用 **Function**。</span><span class="sxs-lookup"><span data-stu-id="6793f-171">If the file can be processed in a short period of time, use a **Function**.</span></span> <span data-ttu-id="6793f-172">如果處理程序很複雜，需要 AI 或其他複雜的指令碼，您可能會發現 [HDInsight](https://docs.microsoft.com/azure/hdinsight?WT.mc_id=riskmodel-docs-scseely)[Azure Databricks](https://docs.microsoft.com/azure/azure-databricks?WT.mc_id=riskmodel-docs-scseely)，或某些自訂項目的效果更好。</span><span class="sxs-lookup"><span data-stu-id="6793f-172">If the processing is complex, requires AI or other complex scripting, you may find that [HDInsight](https://docs.microsoft.com/azure/hdinsight?WT.mc_id=riskmodel-docs-scseely), [Azure Databricks](https://docs.microsoft.com/azure/azure-databricks?WT.mc_id=riskmodel-docs-scseely), or something custom works better.</span></span> <span data-ttu-id="6793f-173">完成時，檔案會以新檔案或資料庫中的記錄的可用表單做為結束。</span><span class="sxs-lookup"><span data-stu-id="6793f-173">When done, the file winds up in a usable form as a new file or as records in a database.</span></span>

 ![](./assets/insurance-risk-assets/process-files.png)

<span data-ttu-id="6793f-174">當資料位於 Azure 中之後，您必須透過模型化應用程式使其可用。</span><span class="sxs-lookup"><span data-stu-id="6793f-174">Once the data is in Azure, you need to make it usable by the modeling application.</span></span> <span data-ttu-id="6793f-175">您可以撰寫程式碼來進行自訂轉換，請透過 **HDInsight** 或 Azure **Databricks** 執行項目，以內嵌較大的項目，或將資料複製到正確的資料集內。</span><span class="sxs-lookup"><span data-stu-id="6793f-175">You can write code to do custom transformations, run the items through **HDInsight** or Azure **Databricks** to ingest larger items, or copy the data into the right data sets.</span></span> <span data-ttu-id="6793f-176">使用巨量資料工具也可以協助您執行動作，例如將非結構化資料轉換成結構化資料，以及針對接收的資料執行任何 AI 和 ML。</span><span class="sxs-lookup"><span data-stu-id="6793f-176">The use of big data tools can also help you do things like transform unstructured data into structured data as well as run any AI and ML over the received data.</span></span> <span data-ttu-id="6793f-177">您也可以裝載虛擬機器、將資料從內部部署直接上傳到資料來源、直接呼叫 Azure Functions 等。</span><span class="sxs-lookup"><span data-stu-id="6793f-177">You can also host virtual machines, upload data straight to data sources from on-premises, call Azure Functions directly, and so on.</span></span>

<span data-ttu-id="6793f-178">之後，資料必須由您的模型使用。</span><span class="sxs-lookup"><span data-stu-id="6793f-178">Later, the data needs to be consumed by your models.</span></span> <span data-ttu-id="6793f-179">執行這項操作的方式，主要取決於計算需要存取資料的方式。</span><span class="sxs-lookup"><span data-stu-id="6793f-179">The way you do this depends largely on how the calculations need to access data.</span></span> <span data-ttu-id="6793f-180">有些模型化系統要求所有資料檔案存留在執行計算的節點上。</span><span class="sxs-lookup"><span data-stu-id="6793f-180">Some modeling systems require all data files to live on the node that runs the calculation.</span></span> <span data-ttu-id="6793f-181">其他系統可以使用 [Azure SQL Database](https://docs.microsoft.com/azure/sql-database/?WT.mc_id=riskmodel-docs-scseely)、[MySQL](https://docs.microsoft.com/azure/mysql/?WT.mc_id=riskmodel-docs-scseely)或 [PostgreSQL](https://docs.microsoft.com/azure/postgresql/?WT.mc_id=riskmodel-docs-scseely) 等的資料庫。</span><span class="sxs-lookup"><span data-stu-id="6793f-181">Others can make use of databases like [Azure SQL Database](https://docs.microsoft.com/azure/sql-database/?WT.mc_id=riskmodel-docs-scseely), [MySQL](https://docs.microsoft.com/azure/mysql/?WT.mc_id=riskmodel-docs-scseely), or [PostgreSQL](https://docs.microsoft.com/azure/postgresql/?WT.mc_id=riskmodel-docs-scseely).</span></span> <span data-ttu-id="6793f-182">您可以使用這些項目中的任何一個低成本版本，然後在模型化執行期間擴充性能。</span><span class="sxs-lookup"><span data-stu-id="6793f-182">You can use a low-cost version of any of these items, and then scale up the performance during a modeling run.</span></span> <span data-ttu-id="6793f-183">這為您提供了每日工作所需的價格，以及數千個核心要求資料時的額外速度。</span><span class="sxs-lookup"><span data-stu-id="6793f-183">This gives you the price you need for every day work, plus the extra speed just when thousands of cores are requesting data.</span></span> <span data-ttu-id="6793f-184">一般來說，此資料在模型化執行期間會處於唯讀狀態。</span><span class="sxs-lookup"><span data-stu-id="6793f-184">Normally, this data will be read-only during a modeling run.</span></span> <span data-ttu-id="6793f-185">如果您的計算跨多個區域進行，請考慮使用 [Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/distribute-data-globally?WT.mc_id=riskmodel-docs-scseely) 或 [Azure SQL 異地複寫](https://docs.microsoft.com/azure/sql-database/sql-database-geo-replication-overview?WT.mc_id=riskmodel-docs-scseely)。</span><span class="sxs-lookup"><span data-stu-id="6793f-185">If your calculations occur across multiple regions, consider using [Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/distribute-data-globally?WT.mc_id=riskmodel-docs-scseely) or [Azure SQL geo-replication](https://docs.microsoft.com/azure/sql-database/sql-database-geo-replication-overview?WT.mc_id=riskmodel-docs-scseely).</span></span> <span data-ttu-id="6793f-186">兩者都提供了以低延遲跨區域自動複寫資料的機制。</span><span class="sxs-lookup"><span data-stu-id="6793f-186">Both provide mechanisms to automatically replicate data across regions with low latency.</span></span> <span data-ttu-id="6793f-187">您的選擇取決於您的開發人員所知道的工具、您如何模型化您的資料，以及您的模型化執行所使用的區域數目。</span><span class="sxs-lookup"><span data-stu-id="6793f-187">Your choice depends on the tools your developers know, how you have modeled your data, and the number of regions used for your modeling run.</span></span>

<span data-ttu-id="6793f-188">請務必花些時間思考您的資料要儲存在何處。</span><span class="sxs-lookup"><span data-stu-id="6793f-188">Do spend some time thinking about where to store your data.</span></span> <span data-ttu-id="6793f-189">了解將會存在多少個相同資料的同時要求。</span><span class="sxs-lookup"><span data-stu-id="6793f-189">Understand how many simultaneous requests for the same data will exist.</span></span> <span data-ttu-id="6793f-190">思考您將如何散發資訊：</span><span class="sxs-lookup"><span data-stu-id="6793f-190">Think about how you will distribute the information:</span></span>

- <span data-ttu-id="6793f-191">是否每個計算節點都取得自己的複本？</span><span class="sxs-lookup"><span data-stu-id="6793f-191">Does each computational node get its own copy?</span></span>
- <span data-ttu-id="6793f-192">副本是否透過某些高頻寬位置共用？</span><span class="sxs-lookup"><span data-stu-id="6793f-192">Is the copy shared through some high bandwidth location?</span></span>

<span data-ttu-id="6793f-193">如果使用 Azure SQL 將資料集中存放，則可能會在大部分時間將資料庫保存在較低的價格層。</span><span class="sxs-lookup"><span data-stu-id="6793f-193">If you keep data centralized using Azure SQL, you will likely keep the database at a lower priced tier most of the time.</span></span> <span data-ttu-id="6793f-194">如果資料只在模型化執行期間使用，而且不會經常更新，則 Azure 客戶將盡可能備份資料，並在兩次執行之間關閉其資料庫執行個體。</span><span class="sxs-lookup"><span data-stu-id="6793f-194">If the data is only used during a modeling run and is not updated very often, Azure customers will go so far as to backup the data and turn off their database instances in between runs.</span></span> <span data-ttu-id="6793f-195">這可能會省下大筆金額。</span><span class="sxs-lookup"><span data-stu-id="6793f-195">The potential savings are large.</span></span> <span data-ttu-id="6793f-196">客戶也可以使用 [Azure SQL 彈性集區](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool?WT.mc_id=riskmodel-docs-scseely)。</span><span class="sxs-lookup"><span data-stu-id="6793f-196">Customers can also make use of [Azure SQL Elastic Pools](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool?WT.mc_id=riskmodel-docs-scseely).</span></span> <span data-ttu-id="6793f-197">它們是設計用來控制資料庫成本，尤其是當您不知道哪些資料庫會在不同時間承受大量負載時。</span><span class="sxs-lookup"><span data-stu-id="6793f-197">These are designed to control database costs, especially when you do not know which databases will be under a lot of load at different times.</span></span> <span data-ttu-id="6793f-198">彈性集區允許資料庫集合使用所需電力，然後在需求轉移到系統中的其他位置時縮減。</span><span class="sxs-lookup"><span data-stu-id="6793f-198">The elastic pools allow a collection of databases to use as much power as they need, then scale back once demand shifts elsewhere in the system.</span></span>

<span data-ttu-id="6793f-199">您可能需要在模型化執行期間停用資料同步，以便此流程中稍後的計算使用相同的資料。</span><span class="sxs-lookup"><span data-stu-id="6793f-199">You may need to disable data synchronization during a modeling run so that calculations later in the process are using the same data.</span></span> <span data-ttu-id="6793f-200">如果您使用佇列，請停用訊息處理器，但要允許佇列接收資料。</span><span class="sxs-lookup"><span data-stu-id="6793f-200">If you are using queuing, disable the message processors but allow the queues to receive data.</span></span>

<span data-ttu-id="6793f-201">您也可以使用執行之前的時間來產生經濟情境、更新精算假設，以及廣泛更新其他靜態資料。</span><span class="sxs-lookup"><span data-stu-id="6793f-201">You can also use the time before the run to generate economic scenarios, update actuarial assumptions, and generally update other static data.</span></span> <span data-ttu-id="6793f-202">讓我們看看經濟情境產生 (ESG)。</span><span class="sxs-lookup"><span data-stu-id="6793f-202">Let's look at economic scenario generation (ESG).</span></span> <span data-ttu-id="6793f-203">[精算師協會](https://www.soa.org/)提供[學院利率產生器](https://www.soa.org/tables-calcs-tools/research-scenario/) (AIRG)，以及模擬美國債券殖利率</span><span class="sxs-lookup"><span data-stu-id="6793f-203">The [Society of Actuaries](https://www.soa.org/) provides the [Academy Interest Rate Generator](https://www.soa.org/tables-calcs-tools/research-scenario/) (AIRG), an ESG which models U. S.</span></span> <span data-ttu-id="6793f-204">的 ESG 。</span><span class="sxs-lookup"><span data-stu-id="6793f-204">Treasury yields.</span></span> <span data-ttu-id="6793f-205">AIRG 是指定用於評價手冊 20 (VM-20) 計算等項目中的。</span><span class="sxs-lookup"><span data-stu-id="6793f-205">AIRG is prescribed for use in items like Valuation Manual 20 (VM-20) calculations.</span></span> <span data-ttu-id="6793f-206">其他 ESG 可模擬股票市場、抵押貨款、商品價格等。</span><span class="sxs-lookup"><span data-stu-id="6793f-206">Other ESGs may model the stock market, mortgages, commodity prices, and so on.</span></span>

<span data-ttu-id="6793f-207">由於您的環境正在對資料進行前置處理，因此您也可以提早執行其他部分。</span><span class="sxs-lookup"><span data-stu-id="6793f-207">Because your environment ispreprocessing the data, you can also run other pieces early.</span></span> <span data-ttu-id="6793f-208">例如，您可能有用記錄代表更大族群進行模擬的項目。</span><span class="sxs-lookup"><span data-stu-id="6793f-208">For example, you may have things which yv1ou model that use records to represent larger populations.</span></span> <span data-ttu-id="6793f-209">這通常是透過叢集記錄來做到的。</span><span class="sxs-lookup"><span data-stu-id="6793f-209">One usually does this by clustering records.</span></span> <span data-ttu-id="6793f-210">如果資料集是偶爾更新，例如一天一次，則可以將記錄集減少為將在模型中使用的部分，做為擷取流程的一部分。</span><span class="sxs-lookup"><span data-stu-id="6793f-210">If the dataset is updated sporadically, such as once a day, one can reduce the record set to what will be used in the model as part of the ingestion process.</span></span>

<span data-ttu-id="6793f-211">讓我們看看一個實際的範例。</span><span class="sxs-lookup"><span data-stu-id="6793f-211">Let's look at a practical example.</span></span> <span data-ttu-id="6793f-212">使用 IFRS-17，您必須將合約分組在一起，讓任兩個合約的開始日期之間的最大距離不到一年。</span><span class="sxs-lookup"><span data-stu-id="6793f-212">With IFRS-17, you need to group your contracts together such that the maximum distance between the start dates for any two contracts is under one year.</span></span> <span data-ttu-id="6793f-213">讓我們假設您以簡單方式執行這件事，並使用合約年做為分組機制。</span><span class="sxs-lookup"><span data-stu-id="6793f-213">Let's assume that you do this the easy way and use the contract year as the grouping mechanism.</span></span> <span data-ttu-id="6793f-214">透過讀取檔案並將記錄移至適當的年份群組，可以在將資料載入到 Azure 時完成此分割。</span><span class="sxs-lookup"><span data-stu-id="6793f-214">This segmentation can be done while data is loaded into Azure by reading through the file and moving the records to the appropriate year groupings.</span></span>

<span data-ttu-id="6793f-215">專注於資料準備可減少執行模型元件所需的時間。</span><span class="sxs-lookup"><span data-stu-id="6793f-215">Focusing on data preparation reduces the time necessary to run the model components.</span></span> <span data-ttu-id="6793f-216">透過及早獲取數據，您可以節省執行模型的時鐘時間。</span><span class="sxs-lookup"><span data-stu-id="6793f-216">By getting the data in early, you can save clock time for running your models.</span></span>

### <a name="parallelization"></a><span data-ttu-id="6793f-217">平行處理</span><span class="sxs-lookup"><span data-stu-id="6793f-217">Parallelization</span></span>

<span data-ttu-id="6793f-218">適當的平行處理步驟可以大幅減少執行時間。</span><span class="sxs-lookup"><span data-stu-id="6793f-218">Proper parallelization of the steps can shrink clock execution time dramatically.</span></span> <span data-ttu-id="6793f-219">透過簡化實作部分，並了解如何以允許兩個或多個活動同時執行的方式加速模型，藉此來實現加速。</span><span class="sxs-lookup"><span data-stu-id="6793f-219">This speedup happens by streamlining the pieces that you implement and knowing how to express your model in a way that allows for two or more activities to run simultaneously.</span></span> <span data-ttu-id="6793f-220">訣竅是在工作要求的大小和單一節點的生產力之間找到平衡。</span><span class="sxs-lookup"><span data-stu-id="6793f-220">The trick is to find balance between the size of the work request and the productivity of an individual node.</span></span> <span data-ttu-id="6793f-221">如果工作花在設定和清理上的時間比評估中的時間多，那就表示太小了。</span><span class="sxs-lookup"><span data-stu-id="6793f-221">If the task spends more time in setup and cleanup than it does in evaluation, you went too small.</span></span> <span data-ttu-id="6793f-222">如果工作太大，就無法改善執行時間。</span><span class="sxs-lookup"><span data-stu-id="6793f-222">If the task is too large, execution time does not improve.</span></span> <span data-ttu-id="6793f-223">您希望活動夠小以便分佈在多個節點上，並在經過的執行時間方面造成正面影響。</span><span class="sxs-lookup"><span data-stu-id="6793f-223">You want the activity to be small enough to spread over multiple nodes and make a positive difference in elapsed execution time.</span></span>

<span data-ttu-id="6793f-224">為了充分運用您的系統，您必須了解模型的工作流程，以及計算與擴充能力之間如何互動。您的軟體可能會有作業、工作或類似的概念。</span><span class="sxs-lookup"><span data-stu-id="6793f-224">To get the most out of your system, you need to understand the workflow for your model and how the computations interact with the ability to scale out. Your software may have a notion of jobs, tasks, or something similar.</span></span> <span data-ttu-id="6793f-225">請運用該知識來設計可以分割工作的項目。</span><span class="sxs-lookup"><span data-stu-id="6793f-225">Use that knowledge to design something that can split work up.</span></span> <span data-ttu-id="6793f-226">如果在您的模型中有一些自訂的步驟，請將那些步驟設計成允許將輸入分割成較小群組以進行處理。</span><span class="sxs-lookup"><span data-stu-id="6793f-226">If you have some custom steps in your model, design those to allow for inputs to be split into smaller groups for processing.</span></span> <span data-ttu-id="6793f-227">通常，這被稱為分散-集中模式。</span><span class="sxs-lookup"><span data-stu-id="6793f-227">Oftentimes, this is referred to as a scatter-gather pattern.</span></span>

- <span data-ttu-id="6793f-228">分散：沿著自然的行分割輸入，並允許個別工作執行。</span><span class="sxs-lookup"><span data-stu-id="6793f-228">Scatter: Split the inputs along natural lines and allow separate tasks to run.</span></span>
- <span data-ttu-id="6793f-229">集中：當工作完成時，收集其輸出。</span><span class="sxs-lookup"><span data-stu-id="6793f-229">Gather: As the tasks complete, collect their outputs.</span></span>

<span data-ttu-id="6793f-230">在分割項目時，也要知道處理程序在繼續進行之前必須同步處理的位置。</span><span class="sxs-lookup"><span data-stu-id="6793f-230">When splitting things, also know where the process needs to synchronize before moving forward.</span></span> <span data-ttu-id="6793f-231">人們分割項目的常見位置有好幾個。</span><span class="sxs-lookup"><span data-stu-id="6793f-231">There are a few common places people split things up.</span></span> <span data-ttu-id="6793f-232">針對巢狀的隨機執行，您可能有一千個外部迴圈，其中一組轉折點執行一百個案例的內部迴圈。</span><span class="sxs-lookup"><span data-stu-id="6793f-232">For nested stochastic runs, you may have a thousand outer loops with a set of inflection points that run inner loops of one hundred scenarios.</span></span> <span data-ttu-id="6793f-233">每個外部迴圈可以同時執行。</span><span class="sxs-lookup"><span data-stu-id="6793f-233">Each outer loop can run simultaneously.</span></span> <span data-ttu-id="6793f-234">您在轉折點停止，然後同時執行內部迴圈，將資訊帶回來調整外部迴圈的資料，然後再次前進。</span><span class="sxs-lookup"><span data-stu-id="6793f-234">You halt at an inflection point, then run the inner loops simultaneously, bring the information back to adjust the data for the outer loop, and go forward again.</span></span> <span data-ttu-id="6793f-235">下圖示範闡明工作流程。</span><span class="sxs-lookup"><span data-stu-id="6793f-235">The following figure demonstrates illustrates the workflow.</span></span> <span data-ttu-id="6793f-236">有足夠的計算後，您可以在 100,000 個核心上運行100,000 個內部迴圈，將處理時間縮短到以下時間的總和：</span><span class="sxs-lookup"><span data-stu-id="6793f-236">Given enough compute, you can run the 100,000 inner loops on 100,000 cores, bringing processing time down to the sum of the following times:</span></span>

![](./assets/insurance-risk-assets/timing.png)

<span data-ttu-id="6793f-237">根據完成散發的方式一點一點增加散發；它可能像使用正確參數建構小作業一樣簡單，也可能像將 100K 個檔案複製到正確位置一樣複雜。</span><span class="sxs-lookup"><span data-stu-id="6793f-237">Distribution will increase a bit depending on how that is done; it may be as simple as constructing a small job with the right parameters or as complex as copying 100K files to the right places.</span></span> <span data-ttu-id="6793f-238">如果可以使用來自 HD Insight 的 Apache Spark、Azure Databricks 或您自己的部署來散發結果會總，則甚至可以加快處理結果的速度。</span><span class="sxs-lookup"><span data-stu-id="6793f-238">Processing results can even be sped up if you can distribute the result aggregation using Apache Spark from HD Insight, Azure Databricks, or your own deployment.</span></span> <span data-ttu-id="6793f-239">例如，計算平均值是記住到目前為止所看到的項目數和總和的簡單問題。</span><span class="sxs-lookup"><span data-stu-id="6793f-239">For example, computing averages is a simple matter of remembering the number of items seen so far and the sum.</span></span> <span data-ttu-id="6793f-240">其他計算可能在具有數千個核心的單一電腦上運作得更好。</span><span class="sxs-lookup"><span data-stu-id="6793f-240">Other computations may work better on a single machine with thousands of cores.</span></span> <span data-ttu-id="6793f-241">對於那些計算，您可以在 Azure 中使用已啟用 GPU 的電腦。</span><span class="sxs-lookup"><span data-stu-id="6793f-241">For those, you can make use of GPU enabled machines in Azure.</span></span>

<span data-ttu-id="6793f-242">大多數精算小組藉著將其模型移至 Azure 來開始這一段過程。</span><span class="sxs-lookup"><span data-stu-id="6793f-242">Most actuarial teams start this journey by moving their models to Azure.</span></span> <span data-ttu-id="6793f-243">然後，他們會收集流程中各個步驟的計時資料。</span><span class="sxs-lookup"><span data-stu-id="6793f-243">They then collect timing data on the various steps in the process.</span></span> <span data-ttu-id="6793f-244">接著，他們會將每個步驟的時鐘時間，從最長到最短的經過時間加以排序。</span><span class="sxs-lookup"><span data-stu-id="6793f-244">They then sort the clock time for each step from longest to shortest elapsed time.</span></span> <span data-ttu-id="6793f-245">它們不會查看總執行時間，因為有些項目可能耗用數千個核心時數，但經過時間只有 20 分鐘。</span><span class="sxs-lookup"><span data-stu-id="6793f-245">They will not look at total execution time since something may consume thousands of core hours but only 20 minutes elapsed time.</span></span> <span data-ttu-id="6793f-246">對於每一個執行時間最長的作業步驟，精算開發人員都在尋找減少經過時間的方法，同時獲得正確的結果。</span><span class="sxs-lookup"><span data-stu-id="6793f-246">For each of the longest running job steps, the actuarial developers look for ways to decrease the elapsed time while getting the right results.</span></span> <span data-ttu-id="6793f-247">此程序會定期重複。</span><span class="sxs-lookup"><span data-stu-id="6793f-247">This process repeats regularly.</span></span> <span data-ttu-id="6793f-248">有些精算小組會設定目標執行時間，例如，一整晚的避險分析的目標是在 8 小時內執行。</span><span class="sxs-lookup"><span data-stu-id="6793f-248">Some actuarial teams will set a target run time, let's say an overnight hedging analysis has a goal of running in under 8 hours.</span></span> <span data-ttu-id="6793f-249">一旦時間超過 8.25 小時，精算小組的某些部分會切換為改善分析中最長部分的時間。</span><span class="sxs-lookup"><span data-stu-id="6793f-249">As soon as the time creeps over 8.25 hours, some part of the actuarial team will switch over to improve the time of the longest piece in the analysis.</span></span> <span data-ttu-id="6793f-250">一旦他們將時間縮短到 7.5 小時之後，就會切換回開發。</span><span class="sxs-lookup"><span data-stu-id="6793f-250">Once they get the time back under 7.5 hours, they switch back to development.</span></span> <span data-ttu-id="6793f-251">精算師返回和最佳化的啟發學習法各不相同。</span><span class="sxs-lookup"><span data-stu-id="6793f-251">The heuristics to go back and optimize vary amongst actuaries.</span></span>

<span data-ttu-id="6793f-252">若要執行這所有作業，您有幾種選擇。</span><span class="sxs-lookup"><span data-stu-id="6793f-252">To run all this, you have several options.</span></span> <span data-ttu-id="6793f-253">多數精算軟體會使用計算網格。</span><span class="sxs-lookup"><span data-stu-id="6793f-253">Most actuarial software works with compute grids.</span></span> <span data-ttu-id="6793f-254">在內部部署和 Azure 上運作的網格使用的是協力廠商封裝 [HPC Pack](https://docs.microsoft.com/azure/virtual-machines/windows/hpcpack-cluster-options?WT.mc_id=riskmodel-docs-scseely) 或其他自訂封裝。</span><span class="sxs-lookup"><span data-stu-id="6793f-254">Grids that work on-premises and on Azure use either [HPC Pack](https://docs.microsoft.com/azure/virtual-machines/windows/hpcpack-cluster-options?WT.mc_id=riskmodel-docs-scseely), a third party package, or something custom.</span></span> <span data-ttu-id="6793f-255">針對 Azure 最佳化的網格會使用[虛擬機器擴展集](https://docs.microsoft.com/azure/virtual-machine-scale-sets/?WT.mc_id=riskmodel-docs-scseely)、[Batch](https://docs.microsoft.com/azure/batch/?WT.mc_id=riskmodel-docs-scseely)，或其他自訂項目。</span><span class="sxs-lookup"><span data-stu-id="6793f-255">Grids optimized for Azure will use [Virtual Machine Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/?WT.mc_id=riskmodel-docs-scseely), [Batch](https://docs.microsoft.com/azure/batch/?WT.mc_id=riskmodel-docs-scseely), or something custom.</span></span> <span data-ttu-id="6793f-256">如果您選擇使用擴展集或 Batch，請務必看看他們對低優先順序 VM 的支援 ([擴展集](https://docs.microsoft.com/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-use-low-priority?WT.mc_id=riskmodel-docs-scseely)低優先順序文件、[Batch](https://docs.microsoft.com/azure/batch/batch-low-pri-vms?WT.mc_id=riskmodel-docs-scseely) 低優先順序文件)。</span><span class="sxs-lookup"><span data-stu-id="6793f-256">If you choose to use either Scale Sets or Batch, make sure to look at their support for low priority VMs ([Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-use-low-priority?WT.mc_id=riskmodel-docs-scseely) low priority docs, [Batch](https://docs.microsoft.com/azure/batch/batch-low-pri-vms?WT.mc_id=riskmodel-docs-scseely) low priority docs).</span></span> <span data-ttu-id="6793f-257">低優先順序 VM 是在只要一般價格一小部分即可租用的硬體上執行的 VM。</span><span class="sxs-lookup"><span data-stu-id="6793f-257">A low priority VM is a VM running on hardware which you can rent for a fraction of the normal price.</span></span> <span data-ttu-id="6793f-258">價格之所以較低，是因為當容量要求時，可能會佔用低優先順序 VM。</span><span class="sxs-lookup"><span data-stu-id="6793f-258">The lower price is available because low priority VMs may be preempted when capacity demands it.</span></span> <span data-ttu-id="6793f-259">如果在時間預算中有一些彈性空間，那麼低優先順序 VM 是降低模型化執行價格的好方法。</span><span class="sxs-lookup"><span data-stu-id="6793f-259">If you have some wiggle room in your time budget, the low priority VMs provide a great way to reduce the price of a modeling run.</span></span>

<span data-ttu-id="6793f-260">如果您需要協調多部電腦上的執行和部署，也許有些是在不同區域中執行，那麼您可以善用 CycleCloud。</span><span class="sxs-lookup"><span data-stu-id="6793f-260">If you need to coordinate the execution and deployment across many machines, perhaps with some running in different regions, you can take advantage of CycleCloud.</span></span> <span data-ttu-id="6793f-261">CycleCloud 不需要任何額外費用。</span><span class="sxs-lookup"><span data-stu-id="6793f-261">CycleCloud costs nothing extra.</span></span> <span data-ttu-id="6793f-262">它會在必要時協調資料移動。</span><span class="sxs-lookup"><span data-stu-id="6793f-262">It orchestrates data movement when necessary.</span></span> <span data-ttu-id="6793f-263">這包括配置、監視，以及關閉電腦。</span><span class="sxs-lookup"><span data-stu-id="6793f-263">This includes allocation, monitoring, and shut down of the machines.</span></span> <span data-ttu-id="6793f-264">它甚至可以處理低優先順序電腦，確認包含費用。</span><span class="sxs-lookup"><span data-stu-id="6793f-264">It can even handle low priority machines, making sure expenses are contained.</span></span> <span data-ttu-id="6793f-265">到目前為止，您已經可以說明您需要的電腦組合。</span><span class="sxs-lookup"><span data-stu-id="6793f-265">You can go so far as to describe the mix of machines you need.</span></span> <span data-ttu-id="6793f-266">例如，也許您需要某一類電腦，但可以在任何具有 2 或多個核心的版本上順利執行。</span><span class="sxs-lookup"><span data-stu-id="6793f-266">For example, maybe you need a class of machine but can run well on any version that has 2 or more cores.</span></span> <span data-ttu-id="6793f-267">週期可將核心配置到這些電腦類型上。</span><span class="sxs-lookup"><span data-stu-id="6793f-267">Cycle can allocate cores across those machine types.</span></span>

## <a name="reporting-on-the-results"></a><span data-ttu-id="6793f-268">報告結果</span><span class="sxs-lookup"><span data-stu-id="6793f-268">Reporting on the Results</span></span>

<span data-ttu-id="6793f-269">執行精算套件並產生其結果之後，您將會有數個可提供給管理機關的報告。</span><span class="sxs-lookup"><span data-stu-id="6793f-269">Once the actuarial packages have run and produced their results, you will have several regulator ready reports.</span></span> <span data-ttu-id="6793f-270">您也會有大量的新資料，可用來加以分析，產生管理機關或稽核員不需要的深入解析。</span><span class="sxs-lookup"><span data-stu-id="6793f-270">You will also have a mountain of new data that you may want to analyze to generate insights not required by regulators or auditors.</span></span> <span data-ttu-id="6793f-271">您可能希望了解最佳客戶的概況。</span><span class="sxs-lookup"><span data-stu-id="6793f-271">You may want to understand the profile of your best customers.</span></span> <span data-ttu-id="6793f-272">使用深入解析，您可以告訴行銷部門，低成本客戶是什麼樣子，讓行銷和銷售部門可以更快找到他們。</span><span class="sxs-lookup"><span data-stu-id="6793f-272">Using insights, you can tell marketing what a low-cost customer looks like so that marketing and sales can find them faster.</span></span> <span data-ttu-id="6793f-273">同樣地，您可以使用這些資料來探索哪些族群從保險中獲益最多。</span><span class="sxs-lookup"><span data-stu-id="6793f-273">Likewise, you can use the data to discover which groups benefit the most from having the insurance.</span></span> <span data-ttu-id="6793f-274">例如，您可能發現善用年度健康檢查的人會提早發現早期階段的健康問題。</span><span class="sxs-lookup"><span data-stu-id="6793f-274">For example, you may discover that people who take advantage of an annual physical found out about early stage health issues earlier.</span></span> <span data-ttu-id="6793f-275">這可為保險公司省下時間和金錢。</span><span class="sxs-lookup"><span data-stu-id="6793f-275">This saves the insurance company time and money.</span></span> <span data-ttu-id="6793f-276">您可以使用該資料來促進客戶群中的行為。</span><span class="sxs-lookup"><span data-stu-id="6793f-276">You can use that data to drive behavior in your customer base.</span></span>

<span data-ttu-id="6793f-277">若要做到這一點，您要存取大量的資料科學工具和某些視覺效果。</span><span class="sxs-lookup"><span data-stu-id="6793f-277">To do this, you will want access to plenty of data science tooling as well as some pieces for visualization.</span></span> <span data-ttu-id="6793f-278">根據您想要進行多少調查，您可以從[資料科學 VM](https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/overview?WT.mc_id=riskmodel-docs-scseely) 開始，這可從 Azure Marketplace 佈建。</span><span class="sxs-lookup"><span data-stu-id="6793f-278">Depending on how much investigation you want to do, you can start with [a Data Science VM](https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/overview?WT.mc_id=riskmodel-docs-scseely) which can be provisioned from the Azure Marketplace.</span></span> <span data-ttu-id="6793f-279">這些 VM 都有 Windows 和 Linux 版本。</span><span class="sxs-lookup"><span data-stu-id="6793f-279">These VMs have both Windows and Linux versions.</span></span> <span data-ttu-id="6793f-280">安裝之後，您會發現 Microsoft R Open、Microsoft ML Server、Anaconda、Jupyter 和其他工具都已準備就緒。</span><span class="sxs-lookup"><span data-stu-id="6793f-280">Installed, you will find Microsoft R Open, Microsoft ML Server, Anaconda, Jupyter, and other tools ready to go.</span></span> <span data-ttu-id="6793f-281">投入一些 R 或 Python 即可將資料視覺化，並與同事分享深入解析。</span><span class="sxs-lookup"><span data-stu-id="6793f-281">Throw in a little R or Python to visualize the data and share insights with your colleagues.</span></span>

<span data-ttu-id="6793f-282">如果需要進行更多分析，您可以使用 Apache 資料科學工具，例如 Spark、Hadoop，以及其他透過 HDInsight 或 Databricks 的工具。</span><span class="sxs-lookup"><span data-stu-id="6793f-282">If you need to do more analysis, you can use Apache data science tools like Spark, Hadoop, and others via either HDInsight or Databricks.</span></span> <span data-ttu-id="6793f-283">當需要進行定期分析，而且您希望將工作流程自動化時，請多多使用這些工具。</span><span class="sxs-lookup"><span data-stu-id="6793f-283">Use these more for when the analysis needs to be done regularly and you want to automate the workflow.</span></span> <span data-ttu-id="6793f-284">這對於大型資料集的即時分析也很有用。</span><span class="sxs-lookup"><span data-stu-id="6793f-284">This is also useful for live analysis of large datasets.</span></span>

<span data-ttu-id="6793f-285">一旦發現有趣的東西，您將需要呈現結果。</span><span class="sxs-lookup"><span data-stu-id="6793f-285">Once you have found something interesting, you need to present the results.</span></span> <span data-ttu-id="6793f-286">許多精算師會先取出範例結果，並將它們插入 Excel，以建立圖表、圖形和其他視覺效果。</span><span class="sxs-lookup"><span data-stu-id="6793f-286">Many actuaries will start by taking the sample results and plugging them into Excel to create charts, graphs, and other visualizations.</span></span> <span data-ttu-id="6793f-287">如果您想要一些具有良好介面的工具來深入鑽研資料，可以看看 [Power BI](https://docs.microsoft.com/power-bi/?WT.mc_id=riskmodel-docs-scseely)。</span><span class="sxs-lookup"><span data-stu-id="6793f-287">If you want something that also has a nice interface for drilling into the data, take a look at [Power BI](https://docs.microsoft.com/power-bi/?WT.mc_id=riskmodel-docs-scseely).</span></span> <span data-ttu-id="6793f-288">Power BI 可以製作一些不錯的視覺效果，顯示來源資料，而且可透過新增[排序、標註書籤](https://docs.microsoft.com/power-bi/desktop-bookmarks?WT.mc_id=riskmodel-docs-scseely)，為讀者說明資料。</span><span class="sxs-lookup"><span data-stu-id="6793f-288">Power BI can make some nice visualizations, display the source data, and it allows for explaining the data to the reader through the addition of [ordered, annotated bookmarks](https://docs.microsoft.com/power-bi/desktop-bookmarks?WT.mc_id=riskmodel-docs-scseely).</span></span>

## <a name="data-retention"></a><span data-ttu-id="6793f-289">資料保留</span><span class="sxs-lookup"><span data-stu-id="6793f-289">Data Retention</span></span>

<span data-ttu-id="6793f-290">您放入系統的大部分資料都必須保留，供日後稽核。</span><span class="sxs-lookup"><span data-stu-id="6793f-290">Much of the data you bring into the system needs to be preserved for future audits.</span></span> <span data-ttu-id="6793f-291">資料保留一般需要 7 到 10 年，但需求各有差異。</span><span class="sxs-lookup"><span data-stu-id="6793f-291">Data retention requirements typically range from 7 to 10 years, but requirements vary.</span></span> <span data-ttu-id="6793f-292">最小保留包含：</span><span class="sxs-lookup"><span data-stu-id="6793f-292">Minimal retention involves:</span></span>

- <span data-ttu-id="6793f-293">針對模型的原始輸入的快照集。</span><span class="sxs-lookup"><span data-stu-id="6793f-293">Snapshot of the original inputs to the model.</span></span> <span data-ttu-id="6793f-294">這包括資產、負債、假設、ESG 和其他輸入。</span><span class="sxs-lookup"><span data-stu-id="6793f-294">This includes assets, liabilities, assumptions, ESGs, and other inputs.</span></span>
- <span data-ttu-id="6793f-295">最終輸出的快照集。</span><span class="sxs-lookup"><span data-stu-id="6793f-295">Snapshot of the final outputs.</span></span> <span data-ttu-id="6793f-296">這包括用來建立呈給管理機關的報告的任何資料。</span><span class="sxs-lookup"><span data-stu-id="6793f-296">This includes any data used to create reports presented to regulatory bodies.</span></span>
- <span data-ttu-id="6793f-297">其他重要的中繼結果。</span><span class="sxs-lookup"><span data-stu-id="6793f-297">Other important, intermediate results.</span></span> <span data-ttu-id="6793f-298">稽核員會詢問您的模型為什麼會得出某些結果。</span><span class="sxs-lookup"><span data-stu-id="6793f-298">An auditor will ask why your model came up with some result.</span></span> <span data-ttu-id="6793f-299">您必須保留模型為什麼做出特定選擇或得出特定數字的相關證據。</span><span class="sxs-lookup"><span data-stu-id="6793f-299">You need to retain evidence about why the model made certain choices or came up with particular numbers.</span></span> <span data-ttu-id="6793f-300">許多保險公司會選擇保留用來從原始輸入產生最終輸出的二進位檔。</span><span class="sxs-lookup"><span data-stu-id="6793f-300">Many insurers will choose to keep the binaries used to produce the final outputs from the original inputs.</span></span> <span data-ttu-id="6793f-301">然後，當被問到時，他們會重新執行模型以取得中繼結果的全新複本。</span><span class="sxs-lookup"><span data-stu-id="6793f-301">Then, when questioned, they rerun the model to get a fresh copy of the intermediate results.</span></span> <span data-ttu-id="6793f-302">如果輸出相符，中繼檔案應該還要包含所需的說明。</span><span class="sxs-lookup"><span data-stu-id="6793f-302">If the outputs match, then the intermediate files should also contain the explanations they need.</span></span>

<span data-ttu-id="6793f-303">在模型執行期間，精算師會使用可處理從執行載入的要求的資料傳遞機制。</span><span class="sxs-lookup"><span data-stu-id="6793f-303">During the model run, the actuaries use data delivery mechanisms that can handle the request load from the run.</span></span> <span data-ttu-id="6793f-304">當執行完成且不再需要資料時，他們會保留部分資料。</span><span class="sxs-lookup"><span data-stu-id="6793f-304">Once the run is complete and data is no longer needed, they preserve some of the data.</span></span> <span data-ttu-id="6793f-305">保險公司至少應保留輸入和執行階段組態，以滿足任何重現性需求。</span><span class="sxs-lookup"><span data-stu-id="6793f-305">At a minimum, an insurer should preserve the inputs and the runtime configuration for any reproducibility requirements.</span></span> <span data-ttu-id="6793f-306">資料庫會保留在 Azure Blob 儲存體的備份中，而且伺服器會關閉。</span><span class="sxs-lookup"><span data-stu-id="6793f-306">Databases are preserved to backups in Azure Blob Storage and servers are shut down.</span></span> <span data-ttu-id="6793f-307">放在高速儲存體上的資料也會移至成本較低的 Azure Blob 儲存體。</span><span class="sxs-lookup"><span data-stu-id="6793f-307">Data on high speed storage also moves to the less expensive Azure Blob Storage.</span></span> <span data-ttu-id="6793f-308">放進 Blob 儲存體之後，您可以選擇每個 Blob 所使用的資料層：經常性儲存層、非經常性儲存層、封存儲存層。</span><span class="sxs-lookup"><span data-stu-id="6793f-308">Once in Blob Storage, you can choose the data tier used for each blob: hot, cool, or archive.</span></span> <span data-ttu-id="6793f-309">經常性儲存層儲存體非常適合經常存取的檔案。</span><span class="sxs-lookup"><span data-stu-id="6793f-309">Hot storage works well for frequently accessed files.</span></span> <span data-ttu-id="6793f-310">非經常性儲存層儲存體已針對不常存取的資料存取最佳化。</span><span class="sxs-lookup"><span data-stu-id="6793f-310">Cool storage is optimized for infrequent data access.</span></span> <span data-ttu-id="6793f-311">封存儲存層儲存體最適合保留可稽核的檔案，但是節省的成本是延遲成本：封存層資料延遲的計算是以小時為單位。</span><span class="sxs-lookup"><span data-stu-id="6793f-311">Archive storage is best for holding auditable files but the price savings comes at a latency cost: archived tier data latency is measured in hours.</span></span> <span data-ttu-id="6793f-312">請閱讀 [Azure Blob 儲存體︰經常性儲存層、非經常性儲存層和封存儲存層](https://docs.microsoft.com/azure/storage/blobs/storage-blob-storage-tiers?WT.mc_id=riskmodel-docs-scseely)以充分了解不同的儲存層。</span><span class="sxs-lookup"><span data-stu-id="6793f-312">Read [Azure Blob storage: Hot, cool, and archive storage tiers](https://docs.microsoft.com/azure/storage/blobs/storage-blob-storage-tiers?WT.mc_id=riskmodel-docs-scseely) to fully understand the different storage tiers.</span></span> <span data-ttu-id="6793f-313">從資料建立到刪除的過程中，您可以使用生命週期管理來管理資料。</span><span class="sxs-lookup"><span data-stu-id="6793f-313">You can manage data from creation through deletion with lifecycle management.</span></span> <span data-ttu-id="6793f-314">Blob 的 URI 保持為靜態，但是 Blob 的儲存位置會隨著時間越來越便宜。</span><span class="sxs-lookup"><span data-stu-id="6793f-314">URIs for blobs stay static, but where the blob is stored gets cheaper over time.</span></span> <span data-ttu-id="6793f-315">這項功能可為 Azure 儲存體的許多使用者省下大量金錢和困擾。</span><span class="sxs-lookup"><span data-stu-id="6793f-315">This feature will save a lot of money and headaches for many users of Azure Storage.</span></span> <span data-ttu-id="6793f-316">您可以在[管理 Azure Blob 儲存體生命週期](https://docs.microsoft.com/azure/storage/common/storage-lifecycle-managment-concepts?WT.mc_id=riskmodel-docs-scseely)中了解這些細節。</span><span class="sxs-lookup"><span data-stu-id="6793f-316">You can learn about the ins and outs in [Managing the Azure Blob Storage Lifecycle](https://docs.microsoft.com/azure/storage/common/storage-lifecycle-managment-concepts?WT.mc_id=riskmodel-docs-scseely).</span></span> <span data-ttu-id="6793f-317">您可以自動刪除檔案這一點很棒：這表示您不會透過參考超出範圍的檔案而意外擴充稽核，因為可以自動移除檔案本身。</span><span class="sxs-lookup"><span data-stu-id="6793f-317">The fact that you can automatically delete files is wonderful: it means that you won't accidentally expand an audit by referring to a file that is out of scope because the file itself can be removed automatically.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6793f-318">後續步驟</span><span class="sxs-lookup"><span data-stu-id="6793f-318">Next steps</span></span>

<span data-ttu-id="6793f-319">如果您執行的精算系統具有內部部署網格實作，該網格實作也可能在 Azure 上執行。</span><span class="sxs-lookup"><span data-stu-id="6793f-319">If the actuarial system you run has a on premises grid implementation, that grid implementation will likely run on Azure too.</span></span> <span data-ttu-id="6793f-320">某些廠商擁有執行超大規模的特製化 Azure 實作。</span><span class="sxs-lookup"><span data-stu-id="6793f-320">For some vendors, they have specialized Azure implementations that run at hyperscale.</span></span> <span data-ttu-id="6793f-321">隨著移至 Azure 的過程，也請移動您的內部工具。</span><span class="sxs-lookup"><span data-stu-id="6793f-321">As part of the move to Azure, move your internal tooling over as well.</span></span> <span data-ttu-id="6793f-322">各地的精算師都發現，他們的資料科學技能在其膝上型電腦或大型環境中運作良好。</span><span class="sxs-lookup"><span data-stu-id="6793f-322">Actuaries everywhere have been finding that their data science skills work well on their laptop or with a large environment.</span></span> <span data-ttu-id="6793f-323">尋找你的小組已經做過的事情：也許你有些東西使用了深度學習，但在一個 GPU 上需要花費數小時或數天運行。</span><span class="sxs-lookup"><span data-stu-id="6793f-323">Look for things your team already does: maybe you have something that uses deep learning but takes hours or days to run on one GPU.</span></span> <span data-ttu-id="6793f-324">試試在具有 4 個高階 GPU 的電腦上執行相同的工作負載，並查看執行時間；有很高的機率您會看到已經有的項目有顯著的加速。</span><span class="sxs-lookup"><span data-stu-id="6793f-324">Try running the same workload on a machine with 4 high end GPUs and look at the run times; odds are good you will see significant speedups for things you already have.</span></span>

<span data-ttu-id="6793f-325">隨著情況改善，請確認您也建構了一些資料同步處理以便提供模型化資料。</span><span class="sxs-lookup"><span data-stu-id="6793f-325">As things improve, make sure that you also build out some data synchronization to feed the modeling data.</span></span> <span data-ttu-id="6793f-326">除非資料已就緒，否則無法啟動模型執行。</span><span class="sxs-lookup"><span data-stu-id="6793f-326">A model run cannot start until the data is ready.</span></span> <span data-ttu-id="6793f-327">這可能需要增加一些心力，讓您只傳送已變更的資料。</span><span class="sxs-lookup"><span data-stu-id="6793f-327">This may involve adding some effort so that you send only data which has changed.</span></span> <span data-ttu-id="6793f-328">實際的方法也取決於資料大小：更新幾 MB 可能沒什麼大不了，但減少數 GB 上傳的數量將會大大加快速度。</span><span class="sxs-lookup"><span data-stu-id="6793f-328">The actual approach depends on the data size too: updating a few MB maybe isn't a big deal but reducing the number of gigabyte uploads will speed things a lot.</span></span>

### <a name="tutorials"></a><span data-ttu-id="6793f-329">教學課程</span><span class="sxs-lookup"><span data-stu-id="6793f-329">Tutorials</span></span>

- <span data-ttu-id="6793f-330">R 開發人員：[使用 Azure Batch 執行平行 R 模擬](https://docs.microsoft.com/azure/batch/tutorial-r-doazureparallel?WT.mc_id=riskmodel-docs-scseely)</span><span class="sxs-lookup"><span data-stu-id="6793f-330">R Developers: [Run a parallel R simulation with Azure Batch](https://docs.microsoft.com/azure/batch/tutorial-r-doazureparallel?WT.mc_id=riskmodel-docs-scseely)</span></span>
- <span data-ttu-id="6793f-331">示範如何使用 Azure Functions 與儲存體互動的教學課程：[使用 Azure Functions 將映像上傳到 Blob 儲存體](https://docs.microsoft.com/azure/functions/tutorial-static-website-serverless-api-with-database?tutorial-step=2&WT.mc_id=riskmodel-docs-scseely)</span><span class="sxs-lookup"><span data-stu-id="6793f-331">Tutorial to show how to use an Azure Function to interact with storage: [Upload images to Blob storage with Azure Functions](https://docs.microsoft.com/azure/functions/tutorial-static-website-serverless-api-with-database?tutorial-step=2&WT.mc_id=riskmodel-docs-scseely)</span></span>
- <span data-ttu-id="6793f-332">使用 Databricks 進行 ETL：[使用 Azure Databrick 擷取、轉換和載入資料](https://docs.microsoft.com/azure/azure-databricks/databricks-extract-load-sql-data-warehouse?WT.mc_id=riskmodel-docs-scseely)</span><span class="sxs-lookup"><span data-stu-id="6793f-332">ETL with Databricks: [Extract, transform, and load data using Azure Databricks](https://docs.microsoft.com/azure/azure-databricks/databricks-extract-load-sql-data-warehouse?WT.mc_id=riskmodel-docs-scseely)</span></span>
- <span data-ttu-id="6793f-333">使用 HDInsight 進行 ETL：[使用 Azure HDInsight 上的 Apache Hive 來擷取、轉換和載入資料](https://docs.microsoft.com/azure/hdinsight/hdinsight-analyze-flight-delay-data-linux?toc=%2Fen-us%2Fazure%2Fhdinsight%2Fhadoop%2FTOC.json&amp;bc=%2Fen-us%2Fazure%2Fbread%2Ftoc.json&WT.mc_id=riskmodel-docs-scseely)</span><span class="sxs-lookup"><span data-stu-id="6793f-333">ETL with HDInsight: [Extract, transform, and load data using Apache Hive on Azure HDInsight](https://docs.microsoft.com/azure/hdinsight/hdinsight-analyze-flight-delay-data-linux?toc=%2Fen-us%2Fazure%2Fhdinsight%2Fhadoop%2FTOC.json&amp;bc=%2Fen-us%2Fazure%2Fbread%2Ftoc.json&WT.mc_id=riskmodel-docs-scseely)</span></span>
- <span data-ttu-id="6793f-334">資料科學 VM 作法 (Linux)：[https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/linux-dsvm-walkthrough](https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/linux-dsvm-walkthrough?WT.mc_id=riskmodel-docs-scseely)</span><span class="sxs-lookup"><span data-stu-id="6793f-334">Data Science VM How To (Linux): [https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/linux-dsvm-walkthrough](https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/linux-dsvm-walkthrough?WT.mc_id=riskmodel-docs-scseely)</span></span>
- <span data-ttu-id="6793f-335">資料科學 VM 作法 (Windows)：[https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/vm-do-ten-things](https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/vm-do-ten-things?WT.mc_id=riskmodel-docs-scseely)</span><span class="sxs-lookup"><span data-stu-id="6793f-335">Data Science VM How To (Windows): [https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/vm-do-ten-things](https://docs.microsoft.com/azure/machine-learning/data-science-virtual-machine/vm-do-ten-things?WT.mc_id=riskmodel-docs-scseely)</span></span>
